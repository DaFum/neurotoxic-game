(node:26860) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ startMetalGenerator Tests
  Ô£ö Happy Path: Successfully starts metal generator (1.2132ms)
  Ô£ö AudioContext Locked: Returns false if context not ensured (0.883ms)
  Ô£û Race Condition: Aborts if playRequestId changes (2.9961ms)
  Ô£ö BPM Calculation: Defaults correctly if BPM missing (0.2476ms)
  Ô£ö Cleanup: Calls stopTransportAndClear which handles previous cleanup (0.2145ms)
  Ô£û OnEnded: Schedules callback if duration provided (0.5919ms)
  Ô£ö Callback Execution: Trigger guitar and drums (0.2925ms)
Ô£û startMetalGenerator Tests (8.0175ms)
Ôä╣ tests 8
Ôä╣ suites 0
Ôä╣ pass 5
Ôä╣ fail 3
Ôä╣ cancelled 0
Ôä╣ skipped 0
Ôä╣ todo 0
Ôä╣ duration_ms 298.4129

Ô£û failing tests:

test at tests\audioProceduralMetal.test.js:301:11
Ô£û Race Condition: Aborts if playRequestId changes (2.9961ms)
  AssertionError [ERR_ASSERTION]: Should return false if request ID changed
  
  true !== false
  
      at TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioProceduralMetal.test.js:309:12)
      at async Test.run (node:internal/test_runner/test:1113:7)
      at async TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioProceduralMetal.test.js:301:3)
      at async Test.run (node:internal/test_runner/test:1113:7)
      at async startSubtestAfterBootstrap (node:internal/test_runner/harness:358:3) {
    generatedMessage: false,
    code: 'ERR_ASSERTION',
    actual: true,
    expected: false,
    operator: 'strictEqual',
    diff: 'simple'
  }

test at tests\audioProceduralMetal.test.js:349:11
Ô£û OnEnded: Schedules callback if duration provided (0.5919ms)
  AssertionError [ERR_ASSERTION]: Should schedule onEnded
  
  0 !== 1
  
      at TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioProceduralMetal.test.js:355:12)
      at async Test.run (node:internal/test_runner/test:1113:7)
      at async TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioProceduralMetal.test.js:349:3)
      at async Test.run (node:internal/test_runner/test:1113:7)
      at async startSubtestAfterBootstrap (node:internal/test_runner/harness:358:3) {
    generatedMessage: false,
    code: 'ERR_ASSERTION',
    actual: 0,
    expected: 1,
    operator: 'strictEqual',
    diff: 'simple'
  }
