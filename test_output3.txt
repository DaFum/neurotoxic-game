
> neurotoxic-game@0.0.0 test:all
> npm run test && npm run test:ui


> neurotoxic-game@0.0.0 test
> node --test --import tsx --experimental-test-module-mocks --import ./tests/setup.mjs

[GameState] Regional reputation loss in Berlin due to poor gig performance (-10) 
ÔûÂ Crisis Management Integration
  ÔûÂ Gap A: Regional Reputation Penalty on Poor Performance
    Ô£ö should deduct 10 regional reputation if gig score is < 30 (5.235ms)
    Ô£ö should NOT deduct regional reputation if gig score is >= 30 (0.4445ms)
  Ô£ö Gap A: Regional Reputation Penalty on Poor Performance (6.9196ms)
  ÔûÂ Gap I & G: Controversy Passive Effects
    Ô£ö should drain more harmony/mood when controversy is >= 50 (0.957ms)
    Ô£ö should drop sponsor with 20% chance if controversy is >= 80 (0.4066ms)
  Ô£ö Gap I & G: Controversy Passive Effects (1.6746ms)
Ô£ö Crisis Management Integration (9.3495ms)
(node:26076) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ CrowdManager
  Ô£ö loadAssets loads textures correctly (48.3235ms)
  Ô£ö init creates Sprites when texture is available (27.8674ms)
  Ô£ö init creates Graphics when texture is missing (40.3788ms)
  Ô£ö update switches texture to MOSH when combo > 20 (31.3648ms)
  Ô£ö update switches texture to MOSH when toxic mode is on (7.5064ms)
  Ô£ö update handles missing mosh texture gracefully (7.1209ms)
Ô£ö CrowdManager (164.7742ms)
(node:35816) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ EffectManager
  Ô£ö loadAssets loads textures correctly (209.2825ms)
  Ô£ö spawnHitEffect uses blood texture for red colors (36.6907ms)
  Ô£ö spawnHitEffect uses toxic texture for non-red colors (17.0891ms)
  Ô£ö spawnHitEffect falls back to generic Sprite if textures missing (15.6751ms)
  Ô£ö update handles lifecycle and cleanup (24.0655ms)
  Ô£ö dispose clears resources and destroys container (21.9139ms)
  Ô£ö spawnHitEffect enforces max active effects limit (50) and recycles (25.5057ms)
  Ô£ö spawnHitEffect reuses sprites from pool (14.1408ms)
  Ô£ö spawnHitEffect removes the oldest effect (lowest life) even if array is unordered (31.26ms)
Ô£ö EffectManager (398.2823ms)
(node:37268) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ LaneManager
  Ô£ö draws inactive hit bars with translucent lane color fill (84.262ms)
  Ô£ö draws static lane guide strip for readability (24.854ms)
  Ô£ö activates hit bars with stronger fill and white border (15.4677ms)
  Ô£ö does not redraw static lanes on first update frame (7.9928ms)
Ô£ö LaneManager (134.4703ms)
(node:20388) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ NoteManager
  Ô£ö acquireSpriteFromPool returns a new sprite if pool is empty (119.4706ms)
  Ô£ö acquireSpriteFromPool reuses a sprite from the pool (18.9278ms)
  Ô£ö createNoteSprite creates a fallback Sprite with WHITE texture if texture is missing (26.2825ms)
  Ô£ö initializeNoteSprite sets properties correctly for fallback sprite (22.5685ms)
  Ô£ö initializeNoteSprite sets correct texture for lightning lane (25.2927ms)
  Ô£ö initializeNoteSprite sets correct texture for skull lane (13.6745ms)
  Ô£ö acquireSpriteFromPool reuses a Sprite for fallback (7.3104ms)
  Ô£ö initializeNoteSprite sets jitterOffset property (6.68ms)
  Ô£ö update spawns notes when time is reached (7.5742ms)
  Ô£ö update positions visible notes (6.0953ms)
  Ô£ö update handles hit notes and calls onHit (13.8228ms)
  Ô£ö dispose clears resources (18.0531ms)
  Ô£ö notesVersion: initial call resets lastNotesVersion from null to 0 (12.1198ms)
  Ô£ö notesVersion: same version on subsequent calls does not reset render index (22.9601ms)
  Ô£ö notesVersion: version change resets render index and destroys existing sprites (20.4495ms)
  Ô£ö notesVersion: dispose resets lastNotesVersion to null (10.9167ms)
  Ô£ö releaseSpriteToPool respects MAX_POOL_SIZE (20.4561ms)
Ô£ö NoteManager (375.4675ms)
[AudioEngine] No OGG assets bundled. Gig audio will fall back to MIDI playback. 
(node:8292) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ Pixi Resolution Capping
  Ô£ö getOptimalResolution caps resolution at 2 (4749.9437ms)
  Ô£ö PixiStageController uses capped resolution (30.0433ms)
  Ô£ö TourbusStageController uses capped resolution (11.7691ms)
  Ô£ö RoadieStageController uses capped resolution (22.9561ms)
Ô£ö Pixi Resolution Capping (4816.5607ms)
(node:37384) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ PixiStageController
  Ô£ö init initializes managers (84.1997ms)
  Ô£ö handleTicker updates managers (4.277ms)
  Ô£ö dispose disposes managers (3.5703ms)
Ô£ö PixiStageController (93.7072ms)
(node:33288) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ TourbusStageController
  Ô£ö should initialize correctly (188.9541ms)
  Ô£ö should handle asset loading (5.9689ms)
  Ô£ö should run update loop via ticker (4.0874ms)
  Ô£ö should render obstacles in ticker (8.7369ms)
  Ô£ö should remove obstacles that disappear from state (11.9762ms)
  Ô£ö should dispose correctly (7.5022ms)
Ô£ö TourbusStageController (229.5095ms)
ÔûÂ Action Creators
  ÔûÂ createChangeSceneAction
    Ô£ö should create correct action (1.0863ms)
  Ô£ö createChangeSceneAction (2.1318ms)
  ÔûÂ createUpdatePlayerAction
    Ô£ö should create correct action (0.7666ms)
  Ô£ö createUpdatePlayerAction (0.9836ms)
  ÔûÂ createUpdateBandAction
    Ô£ö should create correct action (0.3462ms)
  Ô£ö createUpdateBandAction (0.5627ms)
  ÔûÂ createUpdateSocialAction
    Ô£ö should create correct action (0.3196ms)
  Ô£ö createUpdateSocialAction (0.4977ms)
  ÔûÂ createUpdateSettingsAction
    Ô£ö should create correct action (0.3755ms)
  Ô£ö createUpdateSettingsAction (0.5853ms)
  ÔûÂ createSetMapAction
    Ô£ö should create correct action (0.2248ms)
  Ô£ö createSetMapAction (0.3477ms)
  ÔûÂ createSetGigAction
    Ô£ö should create correct action (0.1891ms)
  Ô£ö createSetGigAction (0.2888ms)
  ÔûÂ createStartGigAction
    Ô£ö should create correct action (0.2058ms)
  Ô£ö createStartGigAction (0.2879ms)
  ÔûÂ createSetSetlistAction
    Ô£ö should create correct action (0.2204ms)
  Ô£ö createSetSetlistAction (0.3305ms)
  ÔûÂ createSetLastGigStatsAction
    Ô£ö should create correct action (0.335ms)
  Ô£ö createSetLastGigStatsAction (0.4492ms)
  ÔûÂ createSetActiveEventAction
    Ô£ö should create correct action with event (0.2479ms)
    Ô£ö should create correct action with null (0.1618ms)
  Ô£ö createSetActiveEventAction (0.5405ms)
  ÔûÂ createAddToastAction
    Ô£ö should create correct action with default type (0.318ms)
    Ô£ö should create correct action with custom type (0.1283ms)
  Ô£ö createAddToastAction (0.5598ms)
  ÔûÂ createRemoveToastAction
    Ô£ö should create correct action (0.1543ms)
  Ô£ö createRemoveToastAction (0.2331ms)
  ÔûÂ createSetGigModifiersAction
    Ô£ö should create correct action with object (0.1818ms)
    Ô£ö should create correct action with function (0.1229ms)
  Ô£ö createSetGigModifiersAction (55.3138ms)
  ÔûÂ createLoadGameAction
    Ô£ö should create correct action (0.6914ms)
  Ô£ö createLoadGameAction (1.5579ms)
  ÔûÂ createResetStateAction
    Ô£ö should create correct action (0.2486ms)
  Ô£ö createResetStateAction (0.82ms)
  ÔûÂ createApplyEventDeltaAction
    Ô£ö should create correct action (0.3452ms)
  Ô£ö createApplyEventDeltaAction (0.5321ms)
  ÔûÂ createPopPendingEventAction
    Ô£ö should create correct action (0.2956ms)
  Ô£ö createPopPendingEventAction (2.523ms)
  ÔûÂ createConsumeItemAction
    Ô£ö should create correct action (0.3249ms)
  Ô£ö createConsumeItemAction (0.4709ms)
  ÔûÂ createAdvanceDayAction
    Ô£ö should create correct action (0.2542ms)
  Ô£ö createAdvanceDayAction (0.363ms)
  ÔûÂ createUnlockTraitAction
    Ô£ö creates correct action (0.8594ms)
  Ô£ö createUnlockTraitAction (0.9726ms)
Ô£ö Action Creators (72.7372ms)
[ArrivalLogic] Starting Gig at destination { venue: 'The Club' }
[ArrivalLogic] Starting Gig at destination { venue: 'The Club' }
[ArrivalLogic] Starting Gig at destination { venue: 'The Club' }
[ArrivalLogic] Starting Gig at destination { venue: 'The Club' }
ÔûÂ handleNodeArrival
  Ô£ö REST_STOP - updates band stamina and mood (2.4413ms)
  Ô£ö START - calls onShowHQ and adds toast (0.5503ms)
  Ô£ö SPECIAL - triggers event when none active (0.3559ms)
  Ô£ö SPECIAL - does not trigger event when already active (0.2518ms)
  Ô£ö SPECIAL - adds toast if no event triggered (0.3054ms)
  Ô£ö GIG - starts gig if harmony > 0 (4.207ms)
  Ô£ö GIG - fails to start gig if harmony <= 0 (0.4878ms)
  Ô£ö FESTIVAL - starts gig if harmony > 0 (0.7702ms)
  Ô£ö FESTIVAL - fails to start gig if harmony <= 0 (0.3486ms)
  Ô£ö FINALE - starts gig if harmony > 0 (0.6729ms)
  Ô£ö FINALE - fails to start gig if harmony <= 0 (1.3527ms)
  Ô£ö GIG - handles startGig error (2.6606ms)
Ô£ö handleNodeArrival (16.7978ms)
[ErrorHandler] Failed to load song {
  name: 'Error',
  message: 'Failed to load song',
  category: 'unknown',
  severity: 'medium',
  context: {},
  recoverable: true,
  timestamp: 1772193918637,
  stack: 'Error: Failed to load song\n' +
    '    at TestContext.<anonymous> (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/tests/arrivalUtils.test.js:147:19)\n' +
    '    at Test.runInAsyncScope (node:async_hooks:214:14)\n' +
    '    at Test.run (node:internal/test_runner/test:1106:25)\n' +
    '    at Suite.processPendingSubtests (node:internal/test_runner/test:788:18)\n' +
    '    at Test.postRun (node:internal/test_runner/test:1235:19)\n' +
    '    at Test.run (node:internal/test_runner/test:1163:12)\n' +
    '    at async Suite.processPendingSubtests (node:internal/test_runner/test:788:7)'
}
[AudioEngine] No OGG assets bundled. Gig audio will fall back to MIDI playback. 
[AudioEngine] Audio asset "test-asset.ogg" not found in bundle, falling back to public path: /assets/test-asset.ogg 
[AudioEngine] Audio asset "cached-asset.ogg" not found in bundle, falling back to public path: /assets/cached-asset.ogg 
[AudioEngine] Audio asset "missing.ogg" not found in bundle, falling back to public path: /assets/missing.ogg 
[AudioEngine] Failed to load audio "missing.ogg": HTTP 404 from /assets/missing.ogg 
[AudioEngine] Audio asset "network-error.ogg" not found in bundle, falling back to public path: /assets/network-error.ogg 
[AudioEngine] Failed to decode audio buffer for "network-error.ogg". This browser may not support OGG Vorbis (e.g. Safari/iOS). Consider providing .m4a or .mp3 fallbacks. Error: Network Error
    at <anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioAssets.test.js:188:13)
    at Object.apply (node:internal/test_runner/mock/mock:757:20)
    at loadAudioBufferInternal (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/assets.js:171:30)
    at loadAudioBuffer (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/assets.js:124:19)
    at TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioAssets.test.js:191:26)
    at Test.runInAsyncScope (node:async_hooks:214:14)
    at Test.run (node:internal/test_runner/test:1106:25)
    at async TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioAssets.test.js:186:3)
    at async Test.run (node:internal/test_runner/test:1113:7)
    at async startSubtestAfterBootstrap (node:internal/test_runner/harness:358:3)
[AudioEngine] Audio asset "bad-audio.ogg" not found in bundle, falling back to public path: /assets/bad-audio.ogg 
[AudioEngine] Failed to decode audio buffer for "bad-audio.ogg". This browser may not support OGG Vorbis (e.g. Safari/iOS). Consider providing .m4a or .mp3 fallbacks. Error: Decode Error
    at Object.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioAssets.test.js:198:13)
    at Object.apply (node:internal/test_runner/mock/mock:757:20)
    at loadAudioBufferInternal (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/assets.js:194:20)
    at async loadAudioBuffer (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/assets.js:128:12)
    at async TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioAssets.test.js:201:20)
    at async Test.run (node:internal/test_runner/test:1113:7)
    at async TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioAssets.test.js:195:3)
    at async Test.run (node:internal/test_runner/test:1113:7)
    at async startSubtestAfterBootstrap (node:internal/test_runner/harness:358:3)
[AudioEngine] Audio asset "timeout.ogg" not found in bundle, falling back to public path: /assets/timeout.ogg 
[AudioEngine] Audio fetch timed out for "timeout.ogg" (/assets/timeout.ogg) 
[AudioEngine] Audio asset "decode-timeout.ogg" not found in bundle, falling back to public path: /assets/decode-timeout.ogg 
(node:31620) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
[AudioEngine] Decoded audio buffer: "test-asset.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 1 items, 0.00MB 
[AudioEngine] Decoded audio buffer: "cached-asset.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 1 items, 0.00MB 
[AudioEngine] canPlayAudioType check failed, returning false. ReferenceError: Audio is not defined
    at canPlayAudioType (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/assets.js:66:15)
    at loadAudioBufferInternal (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/assets.js:241:19)
    at async loadAudioBuffer (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/assets.js:128:12)
    at async TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioAssets.test.js:191:20)
    at async Test.run (node:internal/test_runner/test:1113:7)
    at async TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioAssets.test.js:186:3)
    at async Test.run (node:internal/test_runner/test:1113:7)
    at async startSubtestAfterBootstrap (node:internal/test_runner/harness:358:3)
[AudioEngine] canPlayAudioType check failed, returning false. ReferenceError: Audio is not defined
    at canPlayAudioType (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/assets.js:66:15)
    at loadAudioBufferInternal (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/assets.js:241:19)
    at async loadAudioBuffer (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/assets.js:128:12)
    at async TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioAssets.test.js:201:20)
    at async Test.run (node:internal/test_runner/test:1113:7)
    at async TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioAssets.test.js:195:3)
    at async Test.run (node:internal/test_runner/test:1113:7)
    at async startSubtestAfterBootstrap (node:internal/test_runner/harness:358:3)
ÔûÂ Audio Assets Loading Logic
  Ô£ö Input Validation: returns null for invalid filenames (1.7054ms)
  Ô£ö Successful Load: fetches, decodes, and returns buffer (1.9601ms)
  Ô£ö Caching: subsequent calls return cached buffer without fetch (0.8439ms)
  Ô£ö Fetch Failure: returns null on 404 (0.9884ms)
  Ô£ö Network Error: returns null on fetch exception (6.311ms)
  Ô£ö Decode Error: returns null if decoding fails (1.706ms)
  Ô£ö Fetch Timeout: returns null if fetch takes too long (1.7807ms)
[AudioEngine] Audio decode timed out for "decode-timeout.ogg" (/assets/decode-timeout.ogg) 
  Ô£ö Decode Timeout: returns null if decoding takes too long (10.3368ms)
Ô£ö Audio Assets Loading Logic (31.9171ms)
(node:38680) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ loadAudioBuffer Deduplication Tests
  Ô£ö Deduplicates simultaneous requests for the same file (74.2827ms)
  Ô£ö Processes distinct files independently (60.4177ms)
  Ô£ö Clears pending request after success (89.17ms)
  Ô£ö Clears pending request after failure (0.9892ms)
Ô£ö loadAudioBuffer Deduplication Tests (229.6199ms)
[AudioEngine] Bundled 1 OGG asset(s): path/to/nested.ogg 
(node:34328) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ hasAudioAsset
  Ô£ö returns true for existing asset with full path (1.3517ms)
  Ô£ö returns true for existing asset with basename (0.4502ms)
  Ô£ö returns true for existing nested asset with full path (0.3619ms)
  Ô£ö returns true for existing nested asset by basename (if in map) (0.2026ms)
  Ô£ö returns true when input has ./ prefix (0.2132ms)
  Ô£ö returns true when input has / prefix (0.1889ms)
  Ô£ö returns true for loose matching by basename even if path is wrong (0.2107ms)
  Ô£ö returns false for non-existent asset (0.1717ms)
  Ô£ö returns false for non-string input (0.2388ms)
  Ô£ö returns false for partial match that is not in map (0.2366ms)
Ô£ö hasAudioAsset (43.3385ms)
[AudioEngine] No OGG assets bundled. Gig audio will fall back to MIDI playback. 
[AudioEngine] Audio asset "small0.ogg" not found in bundle, falling back to public path: /assets/small0.ogg 
[AudioEngine] Audio asset "small1.ogg" not found in bundle, falling back to public path: /assets/small1.ogg 
[AudioEngine] Audio asset "small2.ogg" not found in bundle, falling back to public path: /assets/small2.ogg 
[AudioEngine] Audio asset "small3.ogg" not found in bundle, falling back to public path: /assets/small3.ogg 
[AudioEngine] Audio asset "small4.ogg" not found in bundle, falling back to public path: /assets/small4.ogg 
[AudioEngine] Audio asset "small5.ogg" not found in bundle, falling back to public path: /assets/small5.ogg 
[AudioEngine] Audio asset "small6.ogg" not found in bundle, falling back to public path: /assets/small6.ogg 
[AudioEngine] Audio asset "small7.ogg" not found in bundle, falling back to public path: /assets/small7.ogg 
[AudioEngine] Audio asset "small8.ogg" not found in bundle, falling back to public path: /assets/small8.ogg 
[AudioEngine] Audio asset "small9.ogg" not found in bundle, falling back to public path: /assets/small9.ogg 
[AudioEngine] Audio asset "small10.ogg" not found in bundle, falling back to public path: /assets/small10.ogg 
[AudioEngine] Audio asset "small11.ogg" not found in bundle, falling back to public path: /assets/small11.ogg 
[AudioEngine] Audio asset "small12.ogg" not found in bundle, falling back to public path: /assets/small12.ogg 
[AudioEngine] Audio asset "small13.ogg" not found in bundle, falling back to public path: /assets/small13.ogg 
[AudioEngine] Audio asset "small14.ogg" not found in bundle, falling back to public path: /assets/small14.ogg 
[AudioEngine] Audio asset "small0.ogg" not found in bundle, falling back to public path: /assets/small0.ogg 
[AudioEngine] Audio asset "small1.ogg" not found in bundle, falling back to public path: /assets/small1.ogg 
[AudioEngine] Audio asset "small2.ogg" not found in bundle, falling back to public path: /assets/small2.ogg 
[AudioEngine] Audio asset "small3.ogg" not found in bundle, falling back to public path: /assets/small3.ogg 
[AudioEngine] Audio asset "small4.ogg" not found in bundle, falling back to public path: /assets/small4.ogg 
[AudioEngine] Decoded audio buffer: "small0.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 1 items, 0.00MB 
[AudioEngine] Decoded audio buffer: "small1.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 2 items, 0.00MB 
[AudioEngine] Decoded audio buffer: "small2.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 3 items, 0.01MB 
[AudioEngine] Decoded audio buffer: "small3.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 4 items, 0.01MB 
[AudioEngine] Decoded audio buffer: "small4.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 5 items, 0.01MB 
[AudioEngine] Decoded audio buffer: "small5.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 6 items, 0.01MB 
[AudioEngine] Decoded audio buffer: "small6.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 7 items, 0.01MB 
[AudioEngine] Decoded audio buffer: "small7.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 8 items, 0.02MB 
[AudioEngine] Decoded audio buffer: "small8.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 9 items, 0.02MB 
[AudioEngine] Decoded audio buffer: "small9.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 10 items, 0.02MB 
[AudioEngine] Decoded audio buffer: "small10.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 10 items, 0.02MB 
[AudioEngine] Decoded audio buffer: "small11.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 10 items, 0.02MB 
[AudioEngine] Decoded audio buffer: "small12.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 10 items, 0.02MB 
[AudioEngine] Decoded audio buffer: "small13.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 10 items, 0.02MB 
[AudioEngine] Decoded audio buffer: "small14.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 10 items, 0.02MB 
[AudioEngine] Decoded audio buffer: "small0.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 10 items, 0.02MB 
[AudioEngine] Decoded audio buffer: "small1.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 10 items, 0.02MB 
[AudioEngine] Decoded audio buffer: "small2.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 10 items, 0.02MB 
[AudioEngine] Decoded audio buffer: "small3.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 10 items, 0.02MB 
[AudioEngine] Decoded audio buffer: "small4.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 10 items, 0.02MB 
[AudioEngine] Audio asset "large1.ogg" not found in bundle, falling back to public path: /assets/large1.ogg 
[AudioEngine] Decoded audio buffer: "large1.ogg" (29.7s, 44100Hz, 20.00MB). Cache: 1 items, 20.00MB 
[AudioEngine] Audio asset "large2.ogg" not found in bundle, falling back to public path: /assets/large2.ogg 
[AudioEngine] Decoded audio buffer: "large2.ogg" (29.7s, 44100Hz, 20.00MB). Cache: 2 items, 40.00MB 
[AudioEngine] Audio asset "large3.ogg" not found in bundle, falling back to public path: /assets/large3.ogg 
[AudioEngine] Decoded audio buffer: "large3.ogg" (29.7s, 44100Hz, 20.00MB). Cache: 2 items, 40.00MB 
[AudioEngine] Audio asset "large1.ogg" not found in bundle, falling back to public path: /assets/large1.ogg 
[AudioEngine] Decoded audio buffer: "large1.ogg" (29.7s, 44100Hz, 20.00MB). Cache: 2 items, 40.00MB 
[AudioEngine] Audio asset "huge.ogg" not found in bundle, falling back to public path: /assets/huge.ogg 
[AudioEngine] Decoded audio buffer: "huge.ogg" (89.2s, 44100Hz, 60.00MB). Cache: 1 items, 60.00MB 
[AudioEngine] Audio asset "small.ogg" not found in bundle, falling back to public path: /assets/small.ogg 
[AudioEngine] Decoded audio buffer: "small.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 1 items, 0.00MB 
[AudioEngine] Audio asset "huge.ogg" not found in bundle, falling back to public path: /assets/huge.ogg 
[AudioEngine] Decoded audio buffer: "huge.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 2 items, 0.00MB 
[AudioEngine] Audio asset "file0.ogg" not found in bundle, falling back to public path: /assets/file0.ogg 
[AudioEngine] Decoded audio buffer: "file0.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 1 items, 0.00MB 
[AudioEngine] Audio asset "file1.ogg" not found in bundle, falling back to public path: /assets/file1.ogg 
[AudioEngine] Decoded audio buffer: "file1.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 2 items, 0.00MB 
[AudioEngine] Audio asset "file2.ogg" not found in bundle, falling back to public path: /assets/file2.ogg 
[AudioEngine] Decoded audio buffer: "file2.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 3 items, 0.01MB 
[AudioEngine] Audio asset "file3.ogg" not found in bundle, falling back to public path: /assets/file3.ogg 
[AudioEngine] Decoded audio buffer: "file3.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 4 items, 0.01MB 
[AudioEngine] Audio asset "file4.ogg" not found in bundle, falling back to public path: /assets/file4.ogg 
[AudioEngine] Decoded audio buffer: "file4.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 5 items, 0.01MB 
[AudioEngine] Audio asset "file5.ogg" not found in bundle, falling back to public path: /assets/file5.ogg 
[AudioEngine] Decoded audio buffer: "file5.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 6 items, 0.01MB 
[AudioEngine] Audio asset "file6.ogg" not found in bundle, falling back to public path: /assets/file6.ogg 
[AudioEngine] Decoded audio buffer: "file6.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 7 items, 0.01MB 
[AudioEngine] Audio asset "file7.ogg" not found in bundle, falling back to public path: /assets/file7.ogg 
[AudioEngine] Decoded audio buffer: "file7.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 8 items, 0.02MB 
[AudioEngine] Audio asset "file8.ogg" not found in bundle, falling back to public path: /assets/file8.ogg 
[AudioEngine] Decoded audio buffer: "file8.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 9 items, 0.02MB 
[AudioEngine] Audio asset "file9.ogg" not found in bundle, falling back to public path: /assets/file9.ogg 
[AudioEngine] Decoded audio buffer: "file9.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 10 items, 0.02MB 
[AudioEngine] Audio asset "file10.ogg" not found in bundle, falling back to public path: /assets/file10.ogg 
[AudioEngine] Decoded audio buffer: "file10.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 10 items, 0.02MB 
[AudioEngine] Audio asset "file1.ogg" not found in bundle, falling back to public path: /assets/file1.ogg 
[AudioEngine] Decoded audio buffer: "file1.ogg" (0.0s, 44100Hz, 0.00MB). Cache: 10 items, 0.02MB 
(node:22600) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ audioBufferCache optimization
  Ô£ö respects MAX_AUDIO_BUFFER_CACHE_SIZE (10 items) (22.0706ms)
  Ô£ö respects MAX_AUDIO_BUFFER_BYTE_SIZE (50MB) (3.9055ms)
  Ô£ö always keeps at least one item even if it exceeds byte limit (1.692ms)
  Ô£ö LRU behavior preserved with item limit (3.7009ms)
Ô£ö audioBufferCache optimization (40.3175ms)
(node:34472) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ clearTransportEvent
  Ô£ö returns early if id is null (1.3549ms)
  Ô£ö returns early if id is undefined (0.3187ms)
  Ô£ö calls transport clear if id is provided (0.3342ms)
  Ô£ö handles errors and logs warning (2.0538ms)
Ô£ö clearTransportEvent (6.1055ms)
ÔûÂ stopAndDisconnectSource
  Ô£ö returns early if source is null (0.3795ms)
  Ô£ö returns early if source is undefined (0.2197ms)
  Ô£ö calls stop and disconnect on source (0.2572ms)
  Ô£ö handles stop error and logs debug (0.3938ms)
  Ô£ö handles disconnect error and logs debug (0.679ms)
  Ô£ö handles both stop and disconnect errors (0.2941ms)
  Ô£ö handles invalid source object (no methods) (0.4308ms)
Ô£ö stopAndDisconnectSource (4.0244ms)
ÔûÂ stopTransportAndClear
  Ô£ö stops transport and resets position (0.3938ms)
  Ô£ö cleans up loop and part (0.2667ms)
  Ô£ö cleans up midiParts (0.2977ms)
  Ô£ö handles already null loop and part (0.2272ms)
Ô£ö stopTransportAndClear (1.8402ms)
ÔûÂ cleanupGigPlayback
  Ô£ö cleans up gigSource if present (0.2403ms)
  Ô£ö calls resetGigState even if gigSource is null (0.1983ms)
Ô£ö cleanupGigPlayback (0.9696ms)
ÔûÂ cleanupAmbientPlayback
  Ô£ö cleans up ambientSource if present (0.2959ms)
  Ô£ö does nothing if ambientSource is null (0.1526ms)
Ô£ö cleanupAmbientPlayback (0.7803ms)
ÔûÂ cleanupTransportEvents
  Ô£ö clears transport events and resets IDs (3.8488ms)
  Ô£ö handles null IDs gracefully (0.3486ms)
Ô£ö cleanupTransportEvents (4.7542ms)
Ô£ö getPreferredAudioContextState prefers raw context state (1.443ms)
Ô£ö getPreferredAudioContextState falls back to tone context state (0.4019ms)
Ô£ö getPreferredAudioContextState returns unknown when no state exists (0.9757ms)
Ô£ö canResumeAudioContextState only allows resumable states (0.312ms)
Ô£ö isClosedAudioContextState only matches closed state (1.199ms)
[AudioEngine] No OGG assets bundled. Gig audio will fall back to MIDI playback. 
[AudioEngine] Node disposal failed (likely benign) Error: Dispose failed
    at MockPolySynth.MockPolySynth.dispose (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioEngineDispose.test.js:12:11)
    at safeDispose (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/setup.js:25:12)
    at disposeAudio (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/setup.js:115:23)
    at TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioEngineDispose.test.js:41:3)
    at async Test.run (node:internal/test_runner/test:1113:7)
    at async startSubtestAfterBootstrap (node:internal/test_runner/harness:358:3)
[AudioEngine] Node disposal failed (likely benign) Error: Dispose failed
    at MockPolySynth.MockPolySynth.dispose (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioEngineDispose.test.js:12:11)
    at safeDispose (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/setup.js:25:12)
    at disposeAudio (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/setup.js:116:21)
    at TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioEngineDispose.test.js:41:3)
    at async Test.run (node:internal/test_runner/test:1113:7)
    at async startSubtestAfterBootstrap (node:internal/test_runner/harness:358:3)
[AudioEngine] Node disposal failed (likely benign) Error: Dispose failed
    at MockPolySynth.MockPolySynth.dispose (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioEngineDispose.test.js:12:11)
    at safeDispose (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/setup.js:25:12)
    at disposeAudio (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/setup.js:126:25)
    at TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioEngineDispose.test.js:41:3)
    at async Test.run (node:internal/test_runner/test:1113:7)
    at async startSubtestAfterBootstrap (node:internal/test_runner/harness:358:3)
[AudioEngine] Node disposal failed (likely benign) Error: Dispose failed
    at MockPolySynth.MockPolySynth.dispose (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioEngineDispose.test.js:12:11)
    at safeDispose (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/setup.js:25:12)
    at disposeAudio (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/setup.js:129:25)
    at TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioEngineDispose.test.js:41:3)
    at async Test.run (node:internal/test_runner/test:1113:7)
    at async startSubtestAfterBootstrap (node:internal/test_runner/harness:358:3)
[AudioEngine] Node disposal failed (likely benign) Error: Dispose failed
    at MockPolySynth.MockPolySynth.dispose (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioEngineDispose.test.js:12:11)
    at safeDispose (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/setup.js:25:12)
    at disposeAudio (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/setup.js:130:25)
    at TestContext.<anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioEngineDispose.test.js:41:3)
    at async Test.run (node:internal/test_runner/test:1113:7)
    at async startSubtestAfterBootstrap (node:internal/test_runner/harness:358:3)
(node:8728) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
Ô£ö disposeAudio logs error when dispose fails (10.3692ms)
[AudioEngine] No OGG assets bundled. Gig audio will fall back to MIDI playback. 
ÔûÂ calculateGigTimeMs
  Ô£ö calculates gig time with valid context times (1.4283ms)
  Ô£ö returns offset when start time is invalid (0.3377ms)
  Ô£ö defaults to zero for invalid offset (0.2714ms)
Ô£ö calculateGigTimeMs (4.1046ms)
ÔûÂ hasAudioAsset
  Ô£ö returns false for non-string input (0.2619ms)
  Ô£ö returns false for unknown filename (0.2656ms)
Ô£ö hasAudioAsset (1.0956ms)
[AudioEngine] No OGG assets bundled. Gig audio will fall back to MIDI playback. 
ÔûÂ calculateGigPlaybackWindow
  Ô£ö Happy Path: valid inputs within buffer range (1.6239ms)
  Ô£ö Clamps duration to remaining buffer (1.3084ms)
  Ô£ö Resets offsets when they exceed buffer duration (0.616ms)
  Ô£ö Resets offsets when exactly at buffer duration (5.2469ms)
  Ô£ö Handles null duration (play to end) (4.4048ms)
  Ô£ö Handles zero duration request (0.9781ms)
  Ô£ö Handles zero buffer duration (0.3684ms)
  Ô£ö Handles negative inputs (clamps to 0) (1.2449ms)
  Ô£ö Handles NaN inputs (treats as 0) (0.9271ms)
  Ô£ö Handles Infinity inputs (treats as 0) (0.8429ms)
  Ô£ö Handles null/undefined inputs explicitly (0.396ms)
  Ô£ö Complex scenario: Seek + Base offset near end (0.2441ms)
Ô£ö calculateGigPlaybackWindow (25.0351ms)
[AudioEngine] No OGG assets bundled. Gig audio will fall back to MIDI playback. 
(node:18580) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ setupAudio
  Ô£ö completes successfully (3.5942ms)
  Ô£ö handles concurrent calls (1.2783ms)
  Ô£ö propagates errors to concurrent calls (2.0727ms)
Ô£ö setupAudio (12.8801ms)
[AudioSystem] stopMusic called (was playing: nothing). 
[AudioSystem] Ambient started via OGG buffer playback. 
(node:7664) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ AudioManager Tests
  Ô£ö initializes with default values (0.8661ms)
  Ô£ö setMusicVolume updates volume and calls engine (0.4582ms)
  Ô£ö toggleMute updates mute state (0.3135ms)
  Ô£ö resumeMusic resumes paused transport via engine facade (0.3235ms)
  Ô£ö startAmbient calls playRandomAmbientOgg (3.7572ms)
Ô£ö AudioManager Tests (58.2577ms)
[audioEngine] Asset basename conflict for "song.ogg". Keeping "/assets/audio/song.ogg" and ignoring "/assets/sfx/song.ogg".
ÔûÂ normalizeMidiPlaybackOptions
  Ô£ö uses defaults when options are undefined (2.2455ms)
  Ô£ö respects explicit clean playback flag (0.3818ms)
  Ô£ö accepts a valid onEnded callback (0.3324ms)
  Ô£ö normalizes stopAfterSeconds (0.489ms)
  Ô£ö accepts a startTimeSec override (0.5478ms)
Ô£ö normalizeMidiPlaybackOptions (6.5216ms)
ÔûÂ encodePublicAssetPath
  Ô£ö encodes spaces and preserves slashes (0.5117ms)
  Ô£ö handles leading slashes (0.6409ms)
  Ô£ö returns empty string for invalid input (1.4512ms)
  Ô£ö encodes special characters safely (0.4565ms)
Ô£ö encodePublicAssetPath (4.8917ms)
ÔûÂ resolveAssetUrl
  ÔûÂ MIDI assets
    Ô£ö prefers bundled URLs (0.5418ms)
    Ô£ö resolves bundled URLs via basename (0.7458ms)
    Ô£ö falls back to public path when missing (0.3009ms)
    Ô£ö normalizes relative filenames and encodes spaces (0.3182ms)
    Ô£ö supports custom public base path (0.2462ms)
    Ô£ö supports relative base path defaults (2.9325ms)
    Ô£ö returns nulls for empty filename (0.7255ms)
  Ô£ö MIDI assets (8.5721ms)
  ÔûÂ non-MIDI assets
    Ô£ö resolves bundled URLs for non-MIDI assets (0.6795ms)
    Ô£ö resolves via basename for nested paths (0.2735ms)
    Ô£ö falls back to public path for missing assets (0.1995ms)
  Ô£ö non-MIDI assets (2.621ms)
Ô£ö resolveAssetUrl (12.3532ms)
ÔûÂ buildAssetUrlMap
  Ô£ö stores relative paths and basenames (0.8769ms)
  Ô£ö warns on basename conflicts and keeps first entry (0.6466ms)
Ô£ö buildAssetUrlMap (2.4371ms)
ÔûÂ buildAssetUrlMap OGG key filtering
  Ô£ö full paths and basenames are both stored for OGG assets (0.2582ms)
  Ô£ö full paths with subdirectories are distinguishable from basenames (1.1474ms)
  Ô£ö path-containing keys can be filtered from basename-only keys (0.476ms)
  Ô£ö root-level assets have no slash in key (0.2414ms)
Ô£ö buildAssetUrlMap OGG key filtering (2.9233ms)
ÔûÂ buildAssetUrlMap supports MIDI labeling
  Ô£ö stores relative paths and basenames (0.2574ms)
  Ô£ö warns on basename conflicts and keeps first entry (0.2933ms)
Ô£ö buildAssetUrlMap supports MIDI labeling (0.9792ms)
file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/cleanupUtils.js:3
import { audioState, resetGigState } from './state.js'
                     ^^^^^^^^^^^^^
SyntaxError: The requested module './state.js' does not provide an export named 'resetGigState'
    at #asyncInstantiate (node:internal/modules/esm/module_job:302:21)
    at async ModuleJob.run (node:internal/modules/esm/module_job:405:5)
    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:660:26)
    at async <anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioProcedural.test.js:162:26)

Node.js v24.13.0
Ô£û tests\audioProcedural.test.js (912.4394ms)
file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/proceduralMetal.js:3
import { prepareTransportPlayback } from './playbackUtils.js'
         ^^^^^^^^^^^^^^^^^^^^^^^^
SyntaxError: The requested module './playbackUtils.js' does not provide an export named 'prepareTransportPlayback'
    at #asyncInstantiate (node:internal/modules/esm/module_job:302:21)
    at async ModuleJob.run (node:internal/modules/esm/module_job:405:5)
    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:660:26)
    at async <anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioProceduralMetal.test.js:171:3)

Node.js v24.13.0
Ô£û tests\audioProceduralMetal.test.js (760.4723ms)
file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/cleanupUtils.js:3
import { audioState, resetGigState } from './state.js'
                     ^^^^^^^^^^^^^
SyntaxError: The requested module './state.js' does not provide an export named 'resetGigState'
    at #asyncInstantiate (node:internal/modules/esm/module_job:302:21)
    at async ModuleJob.run (node:internal/modules/esm/module_job:405:5)
    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:660:26)
    at async <anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioProceduralPlayNote.test.js:123:28)

Node.js v24.13.0
Ô£û tests\audioProceduralPlayNote.test.js (865.7783ms)
file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/audio/cleanupUtils.js:3
import { audioState, resetGigState } from './state.js'
                     ^^^^^^^^^^^^^
SyntaxError: The requested module './state.js' does not provide an export named 'resetGigState'
    at #asyncInstantiate (node:internal/modules/esm/module_job:302:21)
    at async ModuleJob.run (node:internal/modules/esm/module_job:405:5)
    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:660:26)
    at async <anonymous> (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\tests\audioProceduralPlaySong.test.js:133:30)

Node.js v24.13.0
Ô£û tests\audioProceduralPlaySong.test.js (866.9677ms)
ÔûÂ selectRandomItem
  Ô£ö returns null for invalid or empty inputs (1.0045ms)
  Ô£ö returns a stable item with deterministic rng (0.3507ms)
  Ô£ö clamps rng values to valid indices (6.6966ms)
Ô£ö selectRandomItem (10.1048ms)
ÔûÂ getScheduledHitTimeMs
  Ô£ö schedules within lead window (1.0481ms)
  Ô£ö fires immediately when outside lead window (0.2951ms)
  Ô£ö handles clock offsets between gig and audio time (0.2241ms)
Ô£ö getScheduledHitTimeMs (3.4947ms)
Ô£ö getRandomChatter supports default chatter in all top-level scenes (11.5342ms)
Ô£ö disallowed scenes are not in ALLOWED_DEFAULT_SCENES (0.3177ms)
Ô£ö harmony chatter fires when band.harmony is low (1.3659ms)
Ô£ö harmony chatter fires when band.harmony is high (0.3712ms)
Ô£ö van chatter fires when fuel is low (0.4959ms)
Ô£ö van chatter fires when condition is critical (0.324ms)
Ô£ö tour progression chatter fires for late tour (0.5282ms)
Ô£ö tour progression chatter fires for early tour (0.4251ms)
Ô£ö fame chatter fires when fameLevel >= 2 (0.4245ms)
Ô£ö fame chatter fires when fame is low (3.5587ms)
Ô£ö inventory chatter fires when strings are missing (0.409ms)
Ô£ö inventory chatter fires for golden pick (7.8772ms)
Ô£ö gig modifier chatter fires when catering is booked (0.8008ms)
Ô£ö gig modifier chatter fires when nothing is booked (0.5005ms)
Ô£ö luck chatter fires when luck is high (0.5257ms)
Ô£ö luck chatter fires when luck is negative (0.5224ms)
(node:18204) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
Ô£ö getRandomChatter returns null when pool is empty (1.6288ms)
Ô£ö getRandomChatter returns venue-specific chatter (0.9908ms)
Ô£ö getRandomChatter falls back to ANY venue chatter (0.3594ms)
Ô£ö getRandomChatter supports legacy lines format (0.3071ms)
Ô£ö getRandomChatter includes standard chatter when conditions met (0.3187ms)
Ô£ö getRandomChatter implements weighted random selection (0.355ms)
ÔûÂ secureRandom
  Ô£ö should use crypto.getRandomValues when available (1.8442ms)
  Ô£ö should return 0 when random value is 0 (0.7378ms)
  Ô£ö should return correct value for max uint32 (0.6008ms)
  Ô£ö should fallback to Math.random when crypto is undefined (0.5616ms)
  Ô£ö should fallback to Math.random when getRandomValues is missing (0.4563ms)
Ô£ö secureRandom (6.0099ms)
Ô£ö CHARACTERS data integrity (10.7071ms)
Ô£ö SONGS_DB data integrity (0.8366ms)
Ô£ö SONGS_DB sourceOgg field (0.7329ms)
Ô£ö ALL_VENUES data integrity (0.7139ms)
Ô£ö EVENTS_DB integrity (1.2689ms)
[EventValidation] Event missing ID in transport { category: 'transport', description: 'Missing ID' }
[EventValidation] Duplicate Event ID in transport: valid_event 
(node:26676) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
Ô£ö Event validation filters out invalid events (1.1959ms)
Ô£ö tests\drumMappings.test.js (1238.261ms)
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 100 }
[Economy] Gig Report Generated { net: 2359, income: 2937, expenses: 578 }
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 10 }
[Economy] Gig Report Generated { net: 1097, income: 1247, expenses: 150 }
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 1000 }
[Economy] Gig Report Generated { net: 2040, income: 2550, expenses: 510 }
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 50 }
[Economy] Gig Report Generated { net: 1788, income: 2167, expenses: 379 }
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 50 }
[Economy] Gig Report Generated { net: 2275, income: 2864, expenses: 589 }
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 50 }
[Economy] Gig Report Generated { net: 1359, income: 1569, expenses: 210 }
[Economy] Calculating Gig Financials { gig: undefined, score: 40, fame: 100 }
[Economy] Gig Report Generated { net: 2359, income: 2987, expenses: 628 }
[Economy] Calculating Gig Financials { gig: undefined, score: 95, fame: 100 }
[Economy] Gig Report Generated { net: 2764, income: 3662, expenses: 898 }
[Economy] Calculating Gig Financials { gig: undefined, score: 95, fame: 100 }
[Economy] Gig Report Generated { net: 2764, income: 3662, expenses: 898 }
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 100 }
[Economy] Gig Report Generated { net: 2479, income: 3187, expenses: 708 }
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 100 }
[Economy] Gig Report Generated { net: 1979, income: 2487, expenses: 508 }
[Economy] Calculating Gig Financials { gig: undefined, score: 90, fame: 200 }
[Economy] Gig Report Generated { net: 2748, income: 3267, expenses: 519 }
[Economy] Calculating Gig Financials { gig: undefined, score: 100, fame: 200 }
[Economy] Gig Report Generated { net: 2956, income: 3938, expenses: 982 }
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 100 }
[Economy] Gig Report Generated { net: 2359, income: 2937, expenses: 578 }
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 100 }
[Economy] Gig Report Generated { net: 2359, income: 2937, expenses: 578 }
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 100 }
[Economy] Gig Report Generated { net: 2339, income: 2937, expenses: 598 }
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 100 }
[Economy] Gig Report Generated { net: 2479, income: 3187, expenses: 708 }
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 100 }
[Economy] Gig Report Generated { net: 700, income: 700, expenses: 0 }
[Economy] Calculating Gig Financials { gig: undefined, score: 0, fame: 100 }
[Economy] Gig Report Generated { net: 2029, income: 2387, expenses: 358 }
[Economy] Calculating Gig Financials { gig: undefined, score: 100, fame: 100 }
[Economy] Gig Report Generated { net: 2674, income: 3462, expenses: 788 }
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 100 }
[Economy] Gig Report Generated { net: 2359, income: 2937, expenses: 578 }
[Economy] Calculating Gig Financials { gig: undefined, score: 80, fame: 100 }
[Economy] Gig Report Generated { net: 2479, income: 3187, expenses: 708 }
[Economy] Calculating Gig Financials { gig: undefined, score: 75, fame: 150 }
[Economy] Gig Report Generated { net: 2425, income: 3025, expenses: 600 }
[Economy] Calculating Gig Financials { gig: undefined, score: 85, fame: 5000 }
[Economy] Gig Report Generated { net: 19475, income: 25075, expenses: 5600 }
[Economy] Calculating Gig Financials { gig: undefined, score: 100, fame: 100 }
[Economy] Gig Report Generated { net: 2244, income: 2898, expenses: 654 }
[Economy] Calculating Gig Financials { gig: undefined, score: 100, fame: 100 }
[Economy] Gig Report Generated { net: 2601, income: 3515, expenses: 914 }
Ô£ö calculateGigFinancials handles base case with ticket sales and guarantee (6.6512ms)
Ô£ö calculateGigFinancials applies fame scaling to fill rate (1.3942ms)
Ô£ö calculateGigFinancials applies promo boost to fill rate (1.4219ms)
Ô£ö calculateGigFinancials applies price sensitivity penalty (0.7388ms)
Ô£ö calculateGigFinancials scales merch sales with performance (0.9062ms)
Ô£ö calculateGigFinancials applies S-rank merch bonus (0.5777ms)
Ô£ö calculateGigFinancials penalizes merch sales for misses (0.9456ms)
Ô£ö calculateGigFinancials handles sold out merch gracefully (0.456ms)
Ô£ö calculateGigFinancials uses all inventory types for sales limit (1.8252ms)
Ô£ö calculateGigFinancials no longer includes transport/food in gig report (handled via Travel phase) (0.7849ms)
Ô£ö calculateGigFinancials includes catering when enabled (1.045ms)
Ô£ö calculateGigFinancials supports new merch key (0.835ms)
Ô£ö calculateGigFinancials handles zero capacity venue (0.7969ms)
Ô£ö calculateGigFinancials handles extreme performance scores (0.9316ms)
Ô£ö calculateGigFinancials merch table modifier increases sales (0.5803ms)
Ô£ö EXPENSE_CONSTANTS are properly defined (0.1595ms)
Ô£ö calculateGigFinancials net profit matches income minus expenses (0.3979ms)
Ô£ö calculateGigFinancials handles high fame with high price (0.846ms)
Ô£ö calculateTravelExpenses returns correct cost structure (0.4578ms)
Ô£ö calculateTravelExpenses computes distance consistently across node coordinates (0.4096ms)
Ô£ö calculateFuelCost applies van tuning upgrade (0.1761ms)
Ô£ö calculateRefuelCost calculates correctly (0.1678ms)
Ô£ö calculateRepairCost calculates correctly (0.1381ms)
Ô£ö calculateFuelCost applies road_warrior trait discount (0.2505ms)
ÔûÂ calculateEffectiveTicketPrice handles discounts correctly
  Ô£ö returns 0 if no gig data (0.1605ms)
  Ô£ö returns original price if not discounted (0.1422ms)
  Ô£ö returns original price if price <= 10 (0.1323ms)
  Ô£ö applies 50% discount if price > 10 and discountedTickets is true (0.1343ms)
Ô£ö calculateEffectiveTicketPrice handles discounts correctly (1.5019ms)
Ô£ö calculateGigFinancials uses effective price (0.801ms)
ÔûÂ Minigame Economy Calculations
  Ô£ö Travel Minigame Results (0.9555ms)
  Ô£ö Travel Minigame Edge Cases (0.2947ms)
  Ô£ö Roadie Minigame Results (0.2961ms)
  Ô£ö Roadie Minigame Edge Cases (0.2618ms)
Ô£ö Minigame Economy Calculations (3.9866ms)
[ErrorHandler] Test error {
  name: 'StateError',
  message: 'Test error',
  category: 'state',
  severity: 'high',
  context: {},
  recoverable: true,
  timestamp: 1772193920398,
  stack: 'StateError: Test error\n' +
    '    at TestContext.<anonymous> (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/tests/errorHandler.test.js:76:19)\n' +
    '    at Test.runInAsyncScope (node:async_hooks:214:14)\n' +
    '    at Test.run (node:internal/test_runner/test:1106:25)\n' +
    '    at Test.start (node:internal/test_runner/test:1003:17)\n' +
    '    at node:internal/test_runner/test:1516:71\n' +
    '    at node:internal/per_context/primordials:466:82\n' +
    '    at new Promise (<anonymous>)\n' +
    '    at new SafePromise (node:internal/per_context/primordials:435:3)\n' +
    '    at node:internal/per_context/primordials:466:9\n' +
    '    at Array.map (<anonymous>)'
}
[ErrorHandler] Test error {
  name: 'StateError',
  message: 'Test error',
  category: 'state',
  severity: 'high',
  context: {},
  recoverable: true,
  timestamp: 1772193920403,
  stack: 'StateError: Test error\n' +
    '    at TestContext.<anonymous> (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/tests/errorHandler.test.js:90:19)\n' +
    '    at Test.runInAsyncScope (node:async_hooks:214:14)\n' +
    '    at Test.run (node:internal/test_runner/test:1106:25)\n' +
    '    at Suite.processPendingSubtests (node:internal/test_runner/test:788:18)\n' +
    '    at Test.postRun (node:internal/test_runner/test:1235:19)\n' +
    '    at Test.run (node:internal/test_runner/test:1163:12)\n' +
    '    at async Promise.all (index 0)\n' +
    '    at async Suite.run (node:internal/test_runner/test:1518:7)\n' +
    '    at async Test.processPendingSubtests (node:internal/test_runner/test:788:7)'
}
[ErrorHandler] Fallback {
  name: 'Error',
  message: 'Fallback',
  category: 'unknown',
  severity: 'medium',
  context: {},
  recoverable: true,
  timestamp: 1772193920404,
  stack: 'Error\n' +
    '    at TestContext.<anonymous> (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/tests/errorHandler.test.js:97:19)\n' +
    '    at Test.runInAsyncScope (node:async_hooks:214:14)\n' +
    '    at Test.run (node:internal/test_runner/test:1106:25)\n' +
    '    at Suite.processPendingSubtests (node:internal/test_runner/test:788:18)\n' +
    '    at Test.postRun (node:internal/test_runner/test:1235:19)\n' +
    '    at Test.run (node:internal/test_runner/test:1163:12)\n' +
    '    at async Suite.processPendingSubtests (node:internal/test_runner/test:788:7)'
}
[ErrorHandler] Audio asset not found for "01 Kranker Schrank": looked up "01 Kranker Schrank.ogg" {
  name: 'AudioError',
  message: 'Audio asset not found for "01 Kranker Schrank": looked up "01 Kranker Schrank.ogg"',
  category: 'audio',
  severity: 'medium',
  context: {
    songName: '01 Kranker Schrank',
    oggFilename: '01 Kranker Schrank.ogg'
  },
  recoverable: true,
  timestamp: 1772193920405,
  stack: 'AudioError: Audio asset not found for "01 Kranker Schrank": looked up "01 Kranker Schrank.ogg"\n' +
    '    at TestContext.<anonymous> (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/tests/errorHandler.test.js:112:19)\n' +
    '    at Test.runInAsyncScope (node:async_hooks:214:14)\n' +
    '    at Test.run (node:internal/test_runner/test:1106:25)\n' +
    '    at Suite.processPendingSubtests (node:internal/test_runner/test:788:18)\n' +
    '    at Test.postRun (node:internal/test_runner/test:1235:19)\n' +
    '    at Test.run (node:internal/test_runner/test:1163:12)\n' +
    '    at async Suite.processPendingSubtests (node:internal/test_runner/test:788:7)'
}
[ErrorHandler] Storage operation failed: test {
  name: 'StorageError',
  message: 'Storage operation failed: test',
  category: 'storage',
  severity: 'medium',
  context: { originalError: 'Storage error' },
  recoverable: true,
  timestamp: 1772193920408,
  stack: 'StorageError: Storage operation failed: test\n' +
    '    at safeStorageOperation (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/errorHandler.js:197:7)\n' +
    '    at TestContext.<anonymous> (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/tests/errorHandler.test.js:135:20)\n' +
    '    at Test.runInAsyncScope (node:async_hooks:214:14)\n' +
    '    at Test.run (node:internal/test_runner/test:1106:25)\n' +
    '    at Suite.processPendingSubtests (node:internal/test_runner/test:788:18)\n' +
    '    at Test.postRun (node:internal/test_runner/test:1235:19)\n' +
    '    at Test.run (node:internal/test_runner/test:1163:12)\n' +
    '    at async Promise.all (index 0)\n' +
    '    at async Suite.run (node:internal/test_runner/test:1518:7)\n' +
    '    at async Test.processPendingSubtests (node:internal/test_runner/test:788:7)'
}
ÔûÂ Custom Error Classes
  ÔûÂ StateError
    Ô£ö should have correct name (1.2297ms)
  Ô£ö StateError (2.4202ms)
  ÔûÂ StorageError
    Ô£ö should have correct name (0.4131ms)
  Ô£ö StorageError (0.6621ms)
  ÔûÂ AudioError
    Ô£ö should have correct name and category (0.4703ms)
    Ô£ö should store context for missing OGG asset diagnostics (0.2282ms)
    Ô£ö should produce a complete log object via toLogObject (1.1899ms)
  Ô£ö AudioError (2.2834ms)
Ô£ö Custom Error Classes (6.906ms)
ÔûÂ handleError
  Ô£ö should call addToast when not silent (4.8203ms)
  Ô£ö should not call addToast when silent (1.0304ms)
  Ô£ö should use fallback message for errors without message (0.7323ms)
  Ô£ö should handle AudioError with silent mode and preserve context (2.1536ms)
Ô£ö handleError (9.302ms)
ÔûÂ safeStorageOperation
  Ô£ö should return result on success (0.5105ms)
  Ô£ö should return fallback on error (0.9499ms)
Ô£ö safeStorageOperation (1.683ms)
(node:5456) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
Ô£ö eventEngine.filterEvents filters by trigger (1.6944ms)
Ô£ö eventEngine.filterEvents respects conditions (0.2689ms)
Ô£ö eventEngine.selectEvent respects cooldowns (0.927ms)
Ô£ö eventEngine.selectEvent prioritizes pending events (0.229ms)
Ô£ö eventEngine.resolveChoice handles simple effects (0.4471ms)
Ô£ö eventEngine.resolveChoice handles skill checks (success) (0.359ms)
Ô£ö eventEngine.resolveChoice handles skill checks (failure) (0.272ms)
Ô£ö eventEngine.resolveChoice handles luck checks (0.2613ms)
Ô£ö eventEngine.resolveChoice sets nextEventId (0.2442ms)
Ô£ö eventEngine.processOptions returns event when no processing needed (0.3745ms)
Ô£ö eventEngine.processOptions handles van_breakdown with spare_tire (0.3028ms)
Ô£ö eventEngine.processOptions does not add spare tire option without inventory (0.1774ms)
Ô£ö eventEngine.applyResult handles resource effects (0.5184ms)
Ô£ö eventEngine.applyResult handles stat effects (0.1778ms)
Ô£ö eventEngine.applyResult handles harmony stat (0.1296ms)
Ô£ö eventEngine.applyResult handles mood changes (0.123ms)
Ô£ö eventEngine.applyResult handles stamina changes (0.1583ms)
Ô£ö eventEngine.applyResult handles combined mood and stamina in composite (0.1521ms)
Ô£ö eventEngine.applyResult handles van fuel (0.1236ms)
Ô£ö eventEngine.applyResult handles van condition stat (0.1406ms)
Ô£ö eventEngine.applyResult clamps van condition to 0-100 range (0.12ms)
Ô£ö eventEngine.applyResult handles game over flag (0.1241ms)
Ô£ö eventEngine.applyResult handles story flags (0.1332ms)
Ô£ö eventEngine.applyResult handles chain events (0.1067ms)
Ô£ö eventEngine.applyResult handles composite effects (0.136ms)
Ô£ö eventEngine.applyResult returns null for null result (0.0842ms)
Ô£ö eventEngine.applyResult handles unlock effects (0.1104ms)
Ô£ö eventEngine.applyResult preserves nextEventId from result (0.1043ms)
Ô£ö eventEngine.applyResult handles time stat (0.0914ms)
Ô£ö eventEngine.applyResult handles viral stat (0.1173ms)
Ô£ö eventEngine.applyResult handles inventory numeric increment (0.1139ms)
Ô£ö eventEngine.applyResult handles inventory non-numeric value (0.1409ms)
Ô£ö eventEngine.applyResult accumulates inventory values across composite effects (0.118ms)
Ô£ö eventEngine logic allows negative inventory in delta (0.1088ms)
Ô£ö eventEngine.applyResult handles hype stat as fame (0.0969ms)
Ô£ö eventEngine.applyResult handles crowd_energy stat as fame (0.1276ms)
Ô£ö eventEngine.applyResult handles score stat increment (0.1347ms)
Ô£ö eventEngine.applyResult accumulates fame from mixed stats (fame, hype, crowd_energy) (0.1542ms)
Ô£ö eventEngine.selectEvent handles condition errors gracefully (0.443ms)
Ô£ö resolveEventChoice returns delta for direct effects (2.1412ms)
Ô£ö resolveEventChoice handles missing choices safely (0.4452ms)
Ô£ö resolveEventChoice appends SAVED_BY_BANDLEADER string on successful bandleader save (22.3983ms)
[Economy] Calculating Gig Financials { gig: undefined, score: 30, fame: 100 }
[Economy] Gig Report Generated { net: 1829, income: 2237, expenses: 408 }
[Economy] Calculating Gig Financials { gig: undefined, score: 95, fame: 100 }
[Economy] Gig Report Generated { net: 2914, income: 3812, expenses: 898 }
[Economy] Calculating Gig Financials { gig: undefined, score: 70, fame: 100 }
[Economy] Gig Report Generated { net: 2329, income: 2887, expenses: 558 }
[Economy] Calculating Gig Financials { gig: undefined, score: 70, fame: 100 }
[Economy] Gig Report Generated { net: 2449, income: 3137, expenses: 688 }
[GameState] Update Player { money: -100 }
[GameState] Update Band { harmony: -50 }
[GameState] Update Band { harmony: 200 }
[GameState] Day Advanced to 2 
Ô£ö calculateDailyUpdates: daily cost includes band size scaling (2.3422ms)
Ô£ö calculateDailyUpdates: money never goes negative (0.4856ms)
Ô£ö calculateDailyUpdates: van condition decays daily (0.363ms)
Ô£ö calculateDailyUpdates: van breakdown chance increases when condition is low (0.279ms)
Ô£ö calculateDailyUpdates: van condition does not go below 0 (0.3096ms)
Ô£ö calculateDailyUpdates: harmony is clamped to [1, 100] (0.2502ms)
Ô£ö calculateDailyUpdates: harmony clamped even with regen active (0.2619ms)
Ô£ö calculateGigFinancials: low performance penalizes merch (5.4573ms)
Ô£ö calculateGigFinancials: merch table modifier increases merch revenue (1.1708ms)
Ô£ö gameReducer: UPDATE_PLAYER clamps money to 0 (0.9684ms)
Ô£ö gameReducer: UPDATE_BAND clamps harmony to [1, 100] (0.8639ms)
Ô£ö gameReducer: ADVANCE_DAY clamps harmony (1.0311ms)
Ô£ö applyEventDelta: fuel clamped to [0, 100] (0.6751ms)
Ô£ö applyEventDelta: harmony clamped to [1, 100] (0.1942ms)
Ô£ö applyEventDelta: money clamped to 0 (0.1627ms)
[GameState] Scene Change: INTRO -> OVERWORLD 
[GameState] Scene Change: INTRO -> OVERWORLD 
[GameState] Update Player { money: 1000 }
[GameState] Update Player { fame: 50 }
[GameState] Update Player { money: 1000 }
[GameState] Update Band { harmony: 50 }
[GameState] Update Band { harmony: -20 }
[GameState] Update Band { harmony: 0 }
[GameState] Update Band { members: [ { name: 'Test', mood: 100, stamina: 100 } ] }
[GameState] Day Advanced to 2 
[GameState] State Reset (Debug) 
[GameState] Game Loaded 
[GameState] Game Loaded 
[GameState] Game Loaded 
[GameState] Regional reputation gain in Stendal (+10) 
ÔûÂ gameReducer
  ÔûÂ CHANGE_SCENE
    Ô£ö should change the current scene (4.258ms)
    Ô£ö should preserve other state properties (13.2758ms)
  Ô£ö CHANGE_SCENE (18.6326ms)
  ÔûÂ UPDATE_PLAYER
    Ô£ö should update player money (1.1276ms)
    Ô£ö should update player fame (0.8525ms)
    Ô£ö should merge player updates with existing state (0.7534ms)
  Ô£ö UPDATE_PLAYER (3.0765ms)
  ÔûÂ UPDATE_BAND
    Ô£ö should update band harmony (0.7037ms)
    Ô£ö should clamp band harmony above zero (0.546ms)
    Ô£ö should clamp band harmony of zero to one (0.4901ms)
    Ô£ö should update band members (1.2314ms)
  Ô£ö UPDATE_BAND (3.4535ms)
  ÔûÂ ADVANCE_DAY
    Ô£ö should clamp harmony after daily updates (8.1908ms)
  Ô£ö ADVANCE_DAY (8.4268ms)
  ÔûÂ UPDATE_SOCIAL
    Ô£ö should update social media followers (0.9255ms)
(node:5168) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
    Ô£ö should preserve other social stats (0.3354ms)
  Ô£ö UPDATE_SOCIAL (15.124ms)
  ÔûÂ SET_GIG_MODIFIERS
    Ô£ö should update gig modifiers with object payload (0.3958ms)
    Ô£ö should update gig modifiers with function payload (0.3228ms)
  Ô£ö SET_GIG_MODIFIERS (0.8993ms)
  ÔûÂ ADD_TOAST
    Ô£ö should add toast to array (0.401ms)
  Ô£ö ADD_TOAST (0.5413ms)
  ÔûÂ REMOVE_TOAST
    Ô£ö should remove toast by id (0.4111ms)
  Ô£ö REMOVE_TOAST (0.5185ms)
  ÔûÂ CONSUME_ITEM
    Ô£ö should decrement numeric inventory item (0.5591ms)
    Ô£ö should set boolean inventory item to false (0.2848ms)
    Ô£ö should not go below zero (0.2331ms)
  Ô£ö CONSUME_ITEM (1.2964ms)
  ÔûÂ RESET_STATE
    Ô£ö should reset to initial state (0.625ms)
  Ô£ö RESET_STATE (0.7751ms)
  ÔûÂ LOAD_GAME
    Ô£ö should load saved state (0.9287ms)
    Ô£ö should migrate energy to catering in gigModifiers (0.4805ms)
    Ô£ö should merge with default values for missing properties (0.4648ms)
  Ô£ö LOAD_GAME (2.0779ms)
  ÔûÂ unknown action
    Ô£ö should return current state for unknown action (0.826ms)
  Ô£ö unknown action (0.933ms)
  ÔûÂ UNLOCK_TRAIT
    Ô£ö UNLOCK_TRAIT unlocks a trait for a band member (Name fallback) (1.1032ms)
    Ô£ö UNLOCK_TRAIT adds toast (0.3842ms)
  Ô£ö UNLOCK_TRAIT (1.6499ms)
  ÔûÂ SET_LAST_GIG_STATS
    Ô£ö should not check trait unlocks in practice mode (0.6971ms)
    Ô£ö should check trait unlocks in normal mode (0.6134ms)
  Ô£ö SET_LAST_GIG_STATS (1.4571ms)
Ô£ö gameReducer (60.7293ms)
ÔûÂ ActionTypes
  Ô£ö should have all expected action types (0.2099ms)
Ô£ö ActionTypes (0.3027ms)
Ô£ö applyEventDelta clamps player and band values (1.7972ms)
Ô£ö applyEventDelta updates social channels safely (0.4515ms)
Ô£ö applyEventDelta applies basic relationship changes (2.2372ms)
Ô£ö applyEventDelta amplifies negative change for grudge_holder (0.4263ms)
Ô£ö applyEventDelta does not amplify positive change for grudge_holder (0.3324ms)
Ô£ö applyEventDelta amplifies positive change for peacemaker (0.2181ms)
Ô£ö applyEventDelta dampens negative change for peacemaker (0.2458ms)
Ô£ö applyEventDelta clamps relationship scores to 0-100 (0.205ms)
Ô£ö applyEventDelta handles multiple relationship changes (0.7875ms)
Ô£ö applyEventDelta handles both traits simultaneously (edge case) and symmetric updates (0.5044ms)
Ô£ö applyEventDelta applies player updates (4.3407ms)
Ô£ö applyEventDelta clamps values (1.418ms)
Ô£ö applyEventDelta handles band inventory updates (0.4583ms)
Ô£ö applyEventDelta applies per-member deltas (0.3365ms)
Ô£ö applyEventDelta handles social updates (0.3018ms)
Ô£ö applyEventDelta handles flags (0.3032ms)
Ô£ö applyEventDelta ignores unsupported score mutations in flags (0.6836ms)
Ô£ö state safety helpers clamp canonical values (0.2033ms)
Ô£ö applyInventoryItemDelta handles numeric and boolean deltas (0.2222ms)
Ô£ö updateGigPerformanceStats tracks peak combo and hype (1.0213ms)
Ô£ö buildGigStatsSnapshot includes required economy fields (0.9702ms)
[GameState] Scene Change: INTRO -> MENU 
[GameState] State Reset (Debug) 
[GameState] Scene Change: INTRO -> OVERWORLD 
[GameState] Map Generated 
[GameState] Update Player {
  money: 470,
  currentNodeId: 'node_1_0',
  location: 'Test City',
  van: { fuel: 85, condition: 100, upgrades: [], breakdownChance: 0.05 }
}
[GameState] Day Advanced to 2 
[GameState] Starting Gig Sequence Test Punk Keller
[GameState] Scene Change: PREGIG -> GIG 
[GameState] Regional reputation gain in Test City (+10) 
[GameState] Scene Change: GIG -> POSTGIG 
[Economy] Calculating Gig Financials { gig: 'Test Punk Keller', score: 30, fame: 0 }
[Economy] Gig Report Generated { net: 1260, income: 1460, expenses: 200 }
[GameState] Update Player { money: 680, fame: 100 }
[GameState] Set Current Gig 
[GameState] Scene Change: POSTGIG -> OVERWORLD 
[GameState] Update Player { money: 660, currentNodeId: 'node_1_0' }
[GameState] Day Advanced to 3 
[GameState] Starting Gig Sequence Test Punk Keller
[GameState] Scene Change: INTRO -> OVERWORLD 
[GameState] Update Player { money: 5 }
[GameState] Starting Gig Sequence Test Punk Keller
[GameState] Scene Change: PREGIG -> GIG 
[GameState] Regional reputation gain in Stendal (+10) 
[GameState] Scene Change: GIG -> POSTGIG 
[GameState] Update Player { money: -95 }
[GameState] Scene Change: POSTGIG -> GAMEOVER 
[GameState] State Reset (Debug) 
[GameState] Scene Change: INTRO -> MENU 
[GameState] Regional reputation loss in Test City due to poor gig performance (-10) 
[GameState] Update Player { money: -999 }
[GameState] Applying Event Delta { player: { money: -99999 } }
[GameState] Update Band { harmony: -50 }
[GameState] Update Band { harmony: 200 }
[GameState] Applying Event Delta { band: { harmony: -200 } }
[GameState] Applying Event Delta { player: { van: { fuel: 500 } } }
[GameState] Applying Event Delta { player: { van: { fuel: -500 } } }
[GameState] Applying Event Delta { player: { van: { condition: -500 } } }
[GameState] Update Player { money: 50 }
[GameState] Day Advanced to 2 
[GameState] Day Advanced to 3 
[GameState] Day Advanced to 4 
[GameState] Day Advanced to 5 
[GameState] Day Advanced to 6 
[GameState] Day Advanced to 2 
[GameState] Update Band {
  inventory: {
    shirts: 0,
    hoodies: 20,
    patches: 100,
    cds: 30,
    vinyl: 10,
    strings: true,
    cables: true,
    drum_parts: true,
    golden_pick: false
  }
}
[GameState] Game Loaded 
[GameState] Game Loaded 
[GameState] Game Loaded 
[GameState] Game Loaded 
[GameState] Game Loaded 
[GameState] Game Loaded 
[GameState] Scene Change: INTRO -> INTRO 
[GameState] Scene Change: INTRO -> MENU 
[GameState] Scene Change: INTRO -> MENU 
[GameState] Scene Change: MENU -> OVERWORLD 
[GameState] Scene Change: INTRO -> MENU 
[GameState] Scene Change: MENU -> SETTINGS 
[GameState] Scene Change: INTRO -> MENU 
[GameState] Scene Change: MENU -> CREDITS 
[GameState] Scene Change: INTRO -> OVERWORLD 
[GameState] Scene Change: OVERWORLD -> PREGIG 
[GameState] Scene Change: INTRO -> OVERWORLD 
[GameState] Scene Change: OVERWORLD -> GAMEOVER 
[GameState] Scene Change: INTRO -> OVERWORLD 
[GameState] Scene Change: OVERWORLD -> MENU 
[GameState] Scene Change: INTRO -> PREGIG 
[GameState] Scene Change: PREGIG -> GIG 
[GameState] Scene Change: INTRO -> PREGIG 
[GameState] Scene Change: PREGIG -> OVERWORLD 
[GameState] Scene Change: INTRO -> GIG 
[GameState] Scene Change: GIG -> POSTGIG 
[GameState] Scene Change: INTRO -> GIG 
[GameState] Scene Change: GIG -> OVERWORLD 
[GameState] Scene Change: INTRO -> POSTGIG 
[GameState] Scene Change: POSTGIG -> OVERWORLD 
[GameState] Scene Change: INTRO -> POSTGIG 
[GameState] Scene Change: POSTGIG -> GAMEOVER 
[GameState] Scene Change: INTRO -> GAMEOVER 
[GameState] Scene Change: GAMEOVER -> MENU 
[GameState] Scene Change: INTRO -> SETTINGS 
[GameState] Scene Change: SETTINGS -> MENU 
[GameState] Scene Change: INTRO -> CREDITS 
[GameState] Scene Change: CREDITS -> MENU 
[GameState] Scene Change: INTRO -> OVERWORLD 
[GameState] Starting Gig Sequence Test Punk Keller
[GameState] Day Advanced to 2 
[GameState] Day Advanced to 2 
ÔûÂ Golden Path: Full Tour Cycle
  Ô£ö Phase 0: Initial state is INTRO (1.3602ms)
  Ô£ö Phase 1: INTRO ÔåÆ MENU (3.9394ms)
  Ô£ö Phase 2: MENU ÔåÆ OVERWORLD via RESET_STATE + CHANGE_SCENE (0.8818ms)
  Ô£ö Phase 3: Set up map in OVERWORLD (0.661ms)
  Ô£ö Phase 4: Travel costs (simulate OVERWORLD travel) (0.9969ms)
  Ô£ö Phase 5: ADVANCE_DAY after travel (1.7482ms)
  Ô£ö Phase 6: OVERWORLD ÔåÆ PREGIG via START_GIG (1.0261ms)
  Ô£ö Phase 7: Configure setlist and modifiers in PREGIG (0.4029ms)
  Ô£ö Phase 8: PREGIG ÔåÆ GIG (0.7321ms)
  Ô£ö Phase 9: Gig performance produces stats (1.232ms)
  Ô£ö Phase 10: GIG ÔåÆ POSTGIG (0.5061ms)
  Ô£ö Phase 11: Calculate financials in POSTGIG (1.6693ms)
  Ô£ö Phase 12: Apply earnings and return to OVERWORLD (1.1571ms)
  Ô£ö Phase 13: Second gig cycle preserves progression (0.7422ms)
Ô£ö Golden Path: Full Tour Cycle (21.6602ms)
ÔûÂ Golden Path: Bankruptcy triggers GAMEOVER
  Ô£ö Drain money to near zero (2.1396ms)
  Ô£ö Start a gig (0.9936ms)
  Ô£ö Negative net triggers GAMEOVER path (0.778ms)
  Ô£ö GAMEOVER ÔåÆ MENU via RESET_STATE (0.5255ms)
Ô£ö Golden Path: Bankruptcy triggers GAMEOVER (6.7537ms)
ÔûÂ Golden Path: State safety invariants across transitions
  Ô£ö Money never goes negative from UPDATE_PLAYER (0.5956ms)
  Ô£ö Money never goes negative from APPLY_EVENT_DELTA (0.9843ms)
  Ô£ö Harmony clamped [1, 100] from UPDATE_BAND (1.1356ms)
  Ô£ö Harmony clamped [1, 100] from APPLY_EVENT_DELTA (0.7826ms)
  Ô£ö Fuel clamped [0, 100] from APPLY_EVENT_DELTA (3.0696ms)
  Ô£ö Van condition clamped [0, 100] from APPLY_EVENT_DELTA (1.1871ms)
  Ô£ö ADVANCE_DAY preserves state safety after many days (1.105ms)
  Ô£ö Van condition decays daily and breakdown chance adjusts (0.4177ms)
  Ô£ö CONSUME_ITEM decrements numeric inventory (0.544ms)
  Ô£ö CONSUME_ITEM sets boolean inventory to false (0.248ms)
  Ô£ö CONSUME_ITEM never goes below 0 (0.4283ms)
Ô£ö Golden Path: State safety invariants across transitions (16.8825ms)
ÔûÂ Golden Path: SET_GIG_MODIFIERS functional updater
  Ô£ö Object payload merges with existing modifiers (0.2335ms)
  Ô£ö Function payload receives current modifiers (0.2554ms)
Ô£ö Golden Path: SET_GIG_MODIFIERS functional updater (0.8673ms)
ÔûÂ Golden Path: LOAD_GAME sanitizes corrupted save data
  Ô£ö Negative money in save is clamped to 0 (4.3095ms)
  Ô£ö Harmony out of range is clamped (0.7612ms)
  Ô£ö Fuel overflow is clamped to 100 (0.9067ms)
  Ô£ö Missing fields get defaults (0.5456ms)
  Ô£ö Legacy energy modifier migrated to catering (0.4718ms)
  Ô£ö Day cannot be less than 1 (0.3566ms)
Ô£ö Golden Path: LOAD_GAME sanitizes corrupted save data (8.7518ms)
ÔûÂ Golden Path: Scene sequence matches state machine
  Ô£ö All valid transitions produce the target scene (1.6152ms)
  Ô£ö START_GIG transitions to PREGIG regardless of current scene (0.3726ms)
Ô£ö Golden Path: Scene sequence matches state machine (2.5834ms)
ÔûÂ Golden Path: Daily cost scaling with band size
  Ô£ö Daily cost includes per-member component (0.4252ms)
Ô£ö Golden Path: Daily cost scaling with band size (0.7597ms)
ÔûÂ Golden Path: Event cooldowns reset on ADVANCE_DAY
  Ô£ö Cooldowns cleared after day advance (1.0668ms)
Ô£ö Golden Path: Event cooldowns reset on ADVANCE_DAY (1.3535ms)
ÔûÂ Golden Path: Gig stats snapshot structure
  Ô£ö buildGigStatsSnapshot includes all fields (0.2033ms)
Ô£ö Golden Path: Gig stats snapshot structure (0.5115ms)
Ô£ö updateProjectiles - updates position and rotation (6.182ms)
Ô£ö updateProjectiles - removes projectiles below limit (0.3455ms)
Ô£ö updateProjectiles - handles empty array (0.3397ms)
Ô£ö updateProjectiles - mutates array in-place (0.2105ms)
Ô£ö trySpawnProjectile - spawns based on chance (0.4195ms)
Ô£ö trySpawnProjectile - does not spawn if random > chance (13.089ms)
Ô£ö trySpawnProjectile - higher chance on low health (1.269ms)
Ô£ö trySpawnProjectile - higher chance on high combo (0.2402ms)
Ô£ö checkCollisions - detects collision and calls onHit (2.4661ms)
Ô£ö checkCollisions - handles no collisions (0.3493ms)
Ô£ö checkCollisions - handles all collisions (1.1133ms)
Ô£ö checkCollisions - handles mixed collisions order (1.2602ms)
ÔûÂ HQ Items Data Integrity
  Ô£ö validates all gear items (1.5083ms)
  Ô£ö validates all instrument items (0.3857ms)
  Ô£ö validates all van items (0.3811ms)
  Ô£ö validates all hq items (0.3218ms)
Ô£ö HQ Items Data Integrity (4.3429ms)
ÔûÂ HQ Passive Effects
  Ô£ö hq_room_label purchase gives money bonus (122.2315ms)
  Ô£ö calculateDailyUpdates applies passive boosts for HQ items (16.5982ms)
  Ô£ö passive boosts are clamped to 100 (14.9171ms)
  Ô£ö passive boosts are clamped to 100 (properly) (18.2758ms)
Ô£ö HQ Passive Effects (173.6464ms)
Ô£ö getGenImageUrl generates correct Pollinations.ai URL (10.5468ms)
Ô£ö IMG_PROMPTS contains expected keys and string values (2.6542ms)
Ô£ö createNamedLazyLoader maps a named export to default (2.0394ms)
Ô£ö createNamedLazyLoader throws a helpful error when export is missing (0.8631ms)
ÔûÂ Logger
  Ô£ö constructor defaults to DEBUG level (2.8021ms)
  Ô£ö constructor loads level from localStorage (0.6329ms)
  Ô£ö setLevel updates level and saves to localStorage (0.8102ms)
  Ô£ö subscribe registers callback and unsubscribe removes it (2.9698ms)
  Ô£ö debug logs only if level <= DEBUG (0.824ms)
  Ô£ö info logs only if level <= INFO (1.8602ms)
  Ô£ö warn logs only if level <= WARN (0.4447ms)
  Ô£ö error logs only if level <= ERROR (0.3667ms)
  Ô£ö logs are trimmed to maxLogs (0.6497ms)
  Ô£ö clear removes all logs and emits clear event (0.4603ms)
  Ô£ö dump returns JSON string of logs (0.3533ms)
  Ô£ö debug does not call console.debug in production (0.3314ms)
  Ô£ö info does not call console.info in production (0.2877ms)
  Ô£ö warn still calls console.warn in production (0.3078ms)
  Ô£ö log entries use valid UUIDs for ids (0.5897ms)
Ô£ö Logger (15.8774ms)
react-i18next:: useTranslation: You will need to pass in an i18next instance by using initReactI18next { code: 'NO_I18NEXT_INSTANCE' }
(node:3056) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
Ô£û MainMenu starts ambient audio when starting a tour (264.0473ms)
Ô£û MainMenu starts ambient audio when loading a save (104.718ms)
Ô£ö MapGenerator generates a map with correct structure (4.6648ms)
Ô£ö MapGenerator guarantees start node (1.1705ms)
Ô£ö MapGenerator guarantees finale node (1.3152ms)
Ô£ö MapGenerator connections are valid (0.7746ms)
Ô£ö MapGenerator ensures nodes do not overlap (0.5972ms)
Ô£ö MapGenerator should not have duplicate venues (if possible) (9.327ms)
(node:13124) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ mapUtils
  ÔûÂ isConnected
    Ô£ö returns true if nodes are directly connected (1.197ms)
    Ô£ö returns false if nodes are not directly connected (0.3005ms)
    Ô£ö returns false if map is missing (0.2689ms)
  Ô£ö isConnected (2.8802ms)
  ÔûÂ getNodeVisibility
    Ô£ö returns visible for current layer (0.3967ms)
    Ô£ö returns visible for next layer (0.2267ms)
    Ô£ö returns dimmed for layer + 2 (0.2077ms)
    Ô£ö returns hidden for layer + 3 or more (0.1956ms)
  Ô£ö getNodeVisibility (1.4487ms)
  ÔûÂ checkSoftlock
    Ô£ö returns false if map or player invalid (1.9992ms)
    Ô£ö returns false if player can reach a neighbor (1.1698ms)
    Ô£ö returns false if player cannot reach neighbor but can refuel (0.7378ms)
    Ô£ö returns true if player cannot reach neighbor and cannot refuel (0.3793ms)
    Ô£ö returns false if current node is GIG even if stranded otherwise (0.8941ms)
  Ô£ö checkSoftlock (5.804ms)
Ô£ö mapUtils (11.1959ms)
ÔûÂ isPercussionTrack
  Ô£ö detects percussion instrument metadata (1.1442ms)
  Ô£ö detects channel 9 percussion tracks (0.7717ms)
  Ô£ö returns false for non-percussion tracks (0.3194ms)
Ô£ö isPercussionTrack (4.2786ms)
ÔûÂ isValidMidiNote
  Ô£ö accepts finite MIDI pitches (0.3873ms)
  Ô£ö rejects invalid MIDI pitches (0.2333ms)
Ô£ö isValidMidiNote (1.6166ms)
ÔûÂ normalizeMidiPitch
  Ô£ö normalizes valid MIDI pitches (0.3218ms)
  Ô£ö returns null for invalid MIDI pitches (0.3416ms)
Ô£ö normalizeMidiPitch (1.5637ms)
ÔûÂ buildMidiTrackEvents
  Ô£ö filters invalid notes and normalizes pitches (1.3566ms)
  Ô£ö returns empty array for invalid input (0.2081ms)
Ô£ö buildMidiTrackEvents (2.1979ms)
ÔûÂ getNoteName
  Ô£ö returns correct note names for valid MIDI pitches (1.3406ms)
  Ô£ö returns null for invalid MIDI pitches (0.315ms)
  Ô£ö handles float inputs by flooring (0.2584ms)
Ô£ö getNoteName (2.6718ms)
[GameState] Starting Travel Minigame to node_1 
[GameState] Travel Minigame Complete { damageTaken: 20, itemsCollected: [ 'FUEL' ] }
[GameState] Starting Roadie Minigame for Gig gig_123 
[GameState] Roadie Minigame Complete { equipmentDamage: 5 }
ÔûÂ Minigame State Transitions
  Ô£ö START_TRAVEL_MINIGAME updates state correctly (5.4237ms)
  Ô£ö COMPLETE_TRAVEL_MINIGAME applies results and updates location (2.9631ms)
  Ô£ö START_ROADIE_MINIGAME updates state correctly (0.6725ms)
  Ô£ö COMPLETE_ROADIE_MINIGAME resets minigame state and applies economy effects (0.8815ms)
Ô£ö Minigame State Transitions (12.4488ms)
[Perf] 100k frames took: 53.26ms
(node:39332) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ EffectManager Performance
  Ô£ö removal performance (55.8966ms)
Ô£ö EffectManager Performance (180.2502ms)
Filter assignment count: 0
(node:19356) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ PixiStageController Filter Performance
  Ô£ö Optimization: Filters should only be assigned on state change (286.8809ms)
Ô£ö PixiStageController Filter Performance (288.3056ms)
ÔûÂ calculateGigPhysics - Character Traits
  Ô£ö should apply gear_nerd trait correctly (Matze) (1.6742ms)
  Ô£ö should apply party_animal trait correctly (Marius) (0.4072ms)
  Ô£ö should apply bandleader trait correctly (Lars) (0.3569ms)
  Ô£ö should apply social_manager trait correctly (Lars) (0.2653ms)
Ô£ö calculateGigPhysics - Character Traits (4.3436ms)
Ô£ö calculateNoteY returns target position at hit time (1.5598ms)
Ô£ö buildRhythmLayout derives lane and hit line positions (0.3726ms)
Ô£ö getPixiColorFromToken falls back when CSS variables are unavailable (0.2881ms)
Ô£ö getPixiColorFromToken resolves css variable color values (0.393ms)
Ô£ö shouldTriggerBankruptcy returns true for negative money (1.1503ms)
Ô£ö shouldTriggerBankruptcy returns false for positive money (0.2322ms)
Ô£ö shouldTriggerBankruptcy at zero money returns false if breaking even or profitable (0.1735ms)
Ô£ö shouldTriggerBankruptcy at zero money returns true if losing money (0.1647ms)
Ô£ö shouldTriggerBankruptcy handles missing netIncome safely (0.1871ms)
Ô£ö shouldTriggerBankruptcy throws for invalid money input (0.5273ms)
Ô£ö shouldTriggerBankruptcy handles numeric strings (0.1966ms)
ÔûÂ purchaseLogicUtils
  ÔûÂ getPrimaryEffect
    Ô£ö returns first effect from effects array (1.9215ms)
    Ô£ö returns effect object if present (0.3662ms)
    Ô£ö returns undefined if no effect (0.3788ms)
  Ô£ö getPrimaryEffect (3.8612ms)
  ÔûÂ getAdjustedCost
    Ô£ö returns cost without modification if no gear_nerd (0.4972ms)
    Ô£ö returns discounted cost with gear_nerd for GEAR money items (0.3082ms)
    Ô£ö does not discount if currency is fame (1.4322ms)
  Ô£ö getAdjustedCost (2.6666ms)
  ÔûÂ buildVanWithUpgrade
    Ô£ö adds upgrade if not present (0.4282ms)
    Ô£ö does not duplicate upgrade (0.2681ms)
    Ô£ö handles undefined van (0.2205ms)
  Ô£ö buildVanWithUpgrade (1.3081ms)
  ÔûÂ isItemOwned
    Ô£ö returns true if item id is in van upgrades (0.4644ms)
    Ô£ö returns true if item id is in hq upgrades (0.1748ms)
    Ô£ö returns true if inventory item is true for inventory_set (0.1471ms)
  Ô£ö isItemOwned (1.0211ms)
  ÔûÂ canAfford
    Ô£ö returns true if money >= adjustedCost (0.2319ms)
    Ô£ö returns false if money < adjustedCost (0.1577ms)
    Ô£ö returns true if fame >= adjustedCost (0.1204ms)
  Ô£ö canAfford (0.6942ms)
  ÔûÂ applyInventorySet
    Ô£ö sets inventory item to value (0.2739ms)
    Ô£ö handles undefined inventory (0.2327ms)
  Ô£ö applyInventorySet (0.6379ms)
  ÔûÂ applyInventoryAdd
    Ô£ö adds value to existing inventory item (0.2582ms)
    Ô£ö initializes inventory item if missing (0.1909ms)
  Ô£ö applyInventoryAdd (0.5783ms)
  ÔûÂ applyStatModifier
    Ô£ö applies to player stat (0.3772ms)
    Ô£ö applies to player money (clamped) (0.1719ms)
    Ô£ö applies to van stat (0.1409ms)
    Ô£ö applies to band stat (0.1481ms)
    Ô£ö applies to band harmony (clamped 1-100) (0.2146ms)
    Ô£ö applies to performance stat by default (0.2712ms)
  Ô£ö applyStatModifier (1.6136ms)
  ÔûÂ applyUnlockUpgrade
    Ô£ö unlocks new upgrade (0.2881ms)
    Ô£ö does not duplicate existing upgrade (0.1271ms)
  Ô£ö applyUnlockUpgrade (0.5537ms)
  ÔûÂ applyUnlockHQ
    Ô£ö returns correct messages for special items (0.3736ms)
    Ô£ö clamps harmony for soundproofing (0.1967ms)
  Ô£ö applyUnlockHQ (0.7439ms)
  ÔûÂ applyPassive
    Ô£ö applies harmony regen travel (0.2714ms)
    Ô£ö applies passive followers (0.1553ms)
  Ô£ö applyPassive (0.5468ms)
Ô£ö purchaseLogicUtils (15.9019ms)
ÔûÂ Relationship Mechanics
  Ô£ö Relationship update via applyEventDelta (1.9076ms)
  Ô£ö Grudge Holder Trait amplifies negative change (0.5167ms)
  Ô£ö Peacemaker Trait amplifies positive change (0.4397ms)
  Ô£ö Peacemaker Trait dampens negative change (1.5213ms)
  Ô£ö Event Engine Placeholder Resolution (2.4164ms)
  Ô£ö Unlock Checks (0.9709ms)
Ô£ö Relationship Mechanics (10.7361ms)
Ô£ö trySpawnProjectile respects spawn chance (11.2568ms)
Ô£ö trySpawnProjectile respects no spawn (0.312ms)
Ô£ö trySpawnProjectile increases chance on low health (0.2062ms)
Ô£ö trySpawnProjectile increases chance on high combo (0.1858ms)
Ô£ö updateProjectiles moves items correctly (0.3249ms)
Ô£ö updateProjectiles removes off-screen items (0.1946ms)
Ô£ö updateProjectiles handles empty input (1.1065ms)
Ô£ö updateProjectiles handles large delta (lag spike) (0.2369ms)
Ô£ö checkCollisions detects hits and removes items (0.7546ms)
Ô£ö checkCollisions handles multiple simultaneous hits (1.6339ms)
Ô£ö checkCollisions handles all items hitting (0.419ms)
Ô£ö checkCollisions handles no hits (0.2491ms)
Ô£ö checkCollisions handles empty input (0.2004ms)
Ô£ö checkCollisions handles missing onHit callback (0.1523ms)
Ô£ö checkHit finds matching note within window (1.6397ms)
Ô£ö checkHit ignores notes outside window (0.3421ms)
Ô£ö checkHit ignores wrong lane (0.2385ms)
Ô£ö checkHit ignores already hit or invisible notes (0.2252ms)
Ô£ö checkHit prioritizes closest note? (0.2532ms)
Ô£ö generateNotesForSong creates correct note structure (2.5418ms)
Ô£ö generateNotesForSong respects difficulty (0.452ms)
(node:7936) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ useRhythmGameLogic Multi-Song Support
  Ô£ö initializes audio and notes for multiple songs in sequence (462.8816ms)
  Ô£ö Quit logic does not trigger multi-song chaining (207.8185ms)
  Ô£ö does not force a default excerpt duration when metadata is missing (127.1186ms)
  Ô£ö Game loop waits for setlistCompleted signal (125.2507ms)
  Ô£ö totalDuration snap: no change when getGigTimeMs returns NaN (185.6027ms)
Ô£ö useRhythmGameLogic Multi-Song Support (1110.7575ms)
(node:39664) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ useRhythmGameScoring Game Over
  Ô£ö marks game over and stops audio on collapse (145.122ms)
Ô£ö useRhythmGameScoring Game Over (146.5099ms)
ÔûÂ rhythm_songs.json integration
  Ô£ö all songs can be parsed without error (4.4211ms)
Ô£ö rhythm_songs.json integration (6.1401ms)
ÔûÂ rhythm_songs.json sourceOgg fields
  Ô£ö every song with sourceMid has a matching sourceOgg (0.968ms)
Ô£ö rhythm_songs.json sourceOgg fields (1.3432ms)
ÔûÂ calculateTimeFromTicks logic
  Ô£ö calculates correct time with constant tempo (0.715ms)
  Ô£ö calculates correct time with tempo change (0.2333ms)
  Ô£ö handles empty map gracefully (0.2209ms)
Ô£ö calculateTimeFromTicks logic (2.0587ms)
ÔûÂ rhythmUtils
  ÔûÂ checkHit
    Ô£ö should return note for exact hit (1.5885ms)
    Ô£ö should return note for hit just inside start boundary (inclusive/exclusive check) (0.4593ms)
    Ô£ö should return note for hit just inside end boundary (0.2705ms)
    Ô£ö should return null for hit exactly at start boundary (exclusive) (0.2041ms)
    Ô£ö should return null for hit exactly at end boundary (exclusive) (0.2342ms)
    Ô£ö should return null for hit outside start boundary (0.1946ms)
    Ô£ö should return null for hit outside end boundary (0.2217ms)
    Ô£ö should respect lane index (0.2419ms)
    Ô£ö should ignore invisible notes (0.2078ms)
    Ô£ö should ignore already hit notes (1.7948ms)
    Ô£ö should handle floating point precision robustly (0.3838ms)
    Ô£ö should return null if elapsed is not finite (0.1915ms)
  Ô£ö checkHit (7.883ms)
  ÔûÂ calculateTimeFromTicks
    Ô£ö should handle empty tempo map (0.4108ms)
    Ô£ö should calculate time for initial segment (ms) (0.2465ms)
    Ô£ö should calculate time crossing segments (ms) (0.1413ms)
    Ô£ö should calculate time crossing segments (seconds) (0.1318ms)
    Ô£ö should handle ticks exactly on segment boundary (0.1691ms)
    Ô£ö should handle ticks beyond last segment (0.1367ms)
  Ô£ö calculateTimeFromTicks (1.5974ms)
  ÔûÂ parseSongNotes excerpt alignment
    Ô£ö uses note tick times directly without subtracting excerptStartMs (0.7438ms)
    Ô£ö uses resolved playback window (excerptEndMs priority) to cap note duration (0.3778ms)
    Ô£ö does not impose a synthetic 30s excerpt cap when excerpt metadata is missing (0.2444ms)
  Ô£ö parseSongNotes excerpt alignment (1.5654ms)
  ÔûÂ calculateTimeFromTicks (Optimized)
    Ô£ö should have preprocessed data (0.2161ms)
    Ô£ö should calculate time for initial segment (ms) (0.1413ms)
    Ô£ö should calculate time crossing segments (ms) (0.5887ms)
    Ô£ö should calculate time crossing segments (seconds) (0.1763ms)
    Ô£ö should handle ticks exactly on segment boundary (0.1493ms)
    Ô£ö should handle ticks beyond last segment (0.1286ms)
  Ô£ö calculateTimeFromTicks (Optimized) (1.7084ms)
Ô£ö rhythmUtils (13.7343ms)
ÔûÂ saveValidator - Leaderboard Identity
  Ô£ö accepts valid playerId and playerName (1.7539ms)
  Ô£ö accepts null playerId (uninitialized) (0.3447ms)
  Ô£ö accepts missing playerId and playerName (legacy saves) (0.7124ms)
  Ô£ö throws if playerId is not a string or null (1.8346ms)
  Ô£ö throws if playerName is not a string (0.599ms)
Ô£ö saveValidator - Leaderboard Identity (55.1261ms)
ÔûÂ saveValidator
  Ô£ö returns true for valid save data (1.8516ms)
  ÔûÂ root object validation
    Ô£ö throws if data is null (1.4725ms)
    Ô£ö throws if data is not an object (0.3235ms)
    Ô£ö throws if data is an array (0.3048ms)
    Ô£ö throws if required top-level keys are missing (0.4368ms)
  Ô£ö root object validation (3.0534ms)
  ÔûÂ player validation
    Ô£ö throws if player is not an object (0.3933ms)
    Ô£ö throws if numeric fields are not numbers (2.0495ms)
    Ô£ö throws if player.van is not an object (0.5222ms)
  Ô£ö player validation (3.4824ms)
  ÔûÂ band validation
    Ô£ö throws if band is not an object (0.48ms)
    Ô£ö throws if band.members is not an array (0.4504ms)
    Ô£ö throws if band member is not an object (0.349ms)
    Ô£ö throws if band member name is not a string (0.3015ms)
    Ô£ö throws if band.harmony is not a number (0.3082ms)
  Ô£ö band validation (2.2544ms)
  ÔûÂ social validation
    Ô£ö throws if social is not an object (0.3352ms)
    Ô£ö throws if social values are not numbers (except lastGigDay) (0.2171ms)
    Ô£ö allows lastGigDay to be null (0.2001ms)
    Ô£ö throws if lastGigDay is not a number or null (0.2057ms)
    Ô£ö validates activeDeals correctly (0.1881ms)
    Ô£ö throws if activeDeals is not an array (0.2652ms)
    Ô£ö throws if activeDeals items are invalid (0.4119ms)
  Ô£ö social validation (2.1593ms)
  ÔûÂ gameMap validation
    Ô£ö throws if gameMap is not an object (0.2865ms)
  Ô£ö gameMap validation (0.4011ms)
Ô£ö saveValidator (14.8961ms)
(node:31400) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
Ô£ö secureRandom returns values in [0, 1) (44.4974ms)
Ô£ö secureRandom utilizes crypto.getRandomValues (0.5983ms)
Ô£ö eventEngine uses secureRandom for event selection (74.5672ms)
[GameState] Game Loaded 
[GameState] Game Loaded 
Ô£ö validateSaveData rejects non-objects (2.2246ms)
Ô£ö validateSaveData rejects missing required keys (0.4376ms)
Ô£ö validateSaveData validates player field types (0.4929ms)
Ô£ö validateSaveData validates band field types (0.3497ms)
Ô£ö validateSaveData validates social values (0.4657ms)
Ô£ö gameReducer LOAD_GAME prevents prototype pollution and state pollution (7.1719ms)
Ô£ö gameReducer LOAD_GAME handles missing optional fields gracefully (0.9702ms)
Ô£ö validateSaveData validates gameMap field type (0.4769ms)
ÔûÂ Unlock Manager Security
  Ô£ö addUnlock sanitizes before adding (2.6074ms)
  Ô£ö addUnlock prevents duplicates (0.5248ms)
  Ô£ö addUnlock adds multiple unique items (3.0744ms)
  Ô£ö addUnlock rejects non-string inputs (0.53ms)
Ô£ö Unlock Manager Security (20.2316ms)
Ô£ö getGigModifiers returns default modifiers for average band (4.2424ms)
Ô£ö getGigModifiers grants telepathy bonus for high harmony (0.5352ms)
Ô£ö getGigModifiers applies disconnect penalty for low harmony (0.3264ms)
Ô£ö getGigModifiers has no special effects for mid harmony (0.2299ms)
Ô£ö getGigModifiers applies grumpy Matze penalty (0.4147ms)
Ô£ö getGigModifiers does not apply Matze penalty when mood is okay (0.2175ms)
Ô£ö getGigModifiers applies tired Marius speed increase (0.2797ms)
Ô£ö getGigModifiers does not apply Marius penalty when stamina is okay (0.1964ms)
Ô£ö getGigModifiers can apply multiple effects (0.245ms)
Ô£ö calculateGigPhysics returns physics object (0.7383ms)
Ô£ö calculateGigPhysics calculates hit windows based on skill (0.2315ms)
Ô£ö calculateGigPhysics skill increases hit windows (0.2589ms)
Ô£ö calculateGigPhysics reduces speed for low stamina (0.301ms)
Ô£ö calculateGigPhysics normal speed for adequate stamina (0.1776ms)
Ô£ö calculateGigPhysics returns default multipliers (0.1885ms)
Ô£ö calculateGigPhysics applies blast machine trait for fast songs (0.1933ms)
Ô£ö calculateGigPhysics does not apply blast machine for slow songs (0.1671ms)
Ô£ö calculateGigPhysics includes avgStamina in result (0.212ms)
Ô£ö calculateGigPhysics handles missing member gracefully (0.1795ms)
Ô£ö calculateGigPhysics handles missing skill property (0.1342ms)
Ô£ö calculateDailyUpdates applies newsletter decay (0.6917ms)
Ô£ö calculateDailyUpdates does not decay if active recently (0.2294ms)
Ô£ö calculateDailyUpdates handles missing lastGigDay safely (0.1649ms)
Ô£ö calculateGigPhysics applies virtuoso trait hit window bonus (0.2139ms)
ÔûÂ Game Loop Logic Simulation
  Ô£ö Phase 1: Travel (Overworld) (3.366ms)
  Ô£ö Phase 2: Refuel (Overworld) (1.5982ms)
  Ô£ö Phase 3: Gig (PostGig) (0.3753ms)
  Ô£ö Phase 4: Next Travel Cycle (0.3943ms)
Ô£ö Game Loop Logic Simulation (8.3825ms)
Ô£ö Stress Test: generatePostOptions over 10,000 random states (1696.6069ms)
Ô£ö Stress Test: resolvePost over 10,000 random selections and RNG rolls (24.8106ms)
Ô£ö Stress Test: calculateDailyUpdates over 10,000 random states (40.0883ms)
Ô£ö calculateViralityScore returns base chance for average performance (4.0534ms)
Ô£ö calculateViralityScore increases with high performance (0.3508ms)
Ô£ö calculateViralityScore applies performance multipliers (0.2302ms)
Ô£ö calculateViralityScore boosts for Kaminstube venue (0.2283ms)
Ô£ö calculateViralityScore boosts for stage diver event (0.2168ms)
Ô£ö calculateViralityScore boosts for influencer event (0.2642ms)
Ô£ö calculateViralityScore is capped at 90% (0.2632ms)
Ô£ö calculateViralityScore combines multiple bonuses (0.1873ms)
Ô£ö generatePostOptions returns array of exactly 3 options (3.1239ms)
Ô£ö generatePostOptions forces sponsor post if active (0.8241ms)
Ô£ö generatePostOptions all have required properties (0.4625ms)
Ô£ö resolvePost handles RNG success (0.5252ms)
Ô£ö resolvePost handles RNG failure (1.1551ms)
Ô£ö resolvePost returns consistent structure (0.3979ms)
Ô£ö calculateViralityScore handles low performance (0.1607ms)
Ô£ö applyReputationDecay returns original followers if days since last post < 3 (0.1994ms)
Ô£ö applyReputationDecay applies 1% decay for 3 days (0.1204ms)
Ô£ö applyReputationDecay applies 8% decay for 10 days (0.1005ms)
Ô£ö applyReputationDecay caps decay at 50% (0.1107ms)
Ô£ö applyReputationDecay handles 0 followers (0.1471ms)
Ô£ö applyReputationDecay floors the result (0.095ms)
Ô£ö calculateSocialGrowth calculates base growth based on performance (0.2443ms)
Ô£ö calculateSocialGrowth applies platform multipliers (0.1244ms)
Ô£ö calculateSocialGrowth applies viral bonus (0.1093ms)
Ô£ö checkViralEvent returns true for high accuracy (0.2648ms)
Ô£ö checkViralEvent returns true for high combo (0.1582ms)
Ô£ö checkViralEvent handles random roll with modifiers (0.1168ms)
Ô£ö checkViralEvent uses calculateViralityScore when context is provided (0.3346ms)
Ô£ö generateBrandName returns different name for alignment (0.4162ms)
Ô£ö generateBrandName returns base name for unknown alignment (0.1113ms)
Ô£ö generateBrandOffers filters by reputation and traits (0.4505ms)
Ô£ö negotiateDeal SAFE strategy succeeds with high roll (0.3727ms)
Ô£ö negotiateDeal SAFE strategy fails with low roll (0.2195ms)
Ô£ö negotiateDeal AGGRESSIVE strategy succeeds with very high luck (0.2398ms)
Ô£ö negotiateDeal AGGRESSIVE strategy revokes deal on failure (0.1743ms)
Ô£ö collab_influencer option exists (1.6594ms)
Ô£ö collab_influencer selects affordable influencer (Micro) (0.8949ms)
Ô£ö collab_influencer fails if no affordable influencer (0.4976ms)
Ô£ö collab_influencer applies relationship discount (0.2876ms)
Ô£ö collab_influencer caps discount at 50% (0.2894ms)
Ô£ö collab_influencer returns influencerUpdate (1.1695ms)
Ô£ö collab_influencer applies trait: tech_savvy (0.3588ms)
Ô£ö collab_influencer applies trait: drama_magnet (0.319ms)
Ô£ö collab_influencer tier followers (0.3928ms)
ÔûÂ Extended Social & Trait Systems
  ÔûÂ Trend System
    Ô£ö generateDailyTrend returns a valid trend string (2.3115ms)
    Ô£ö generatePostOptions boosts trending categories (1.1557ms)
  Ô£ö Trend System (4.5484ms)
  ÔûÂ Brand Deals
    Ô£ö generateBrandOffers returns eligible deals (0.748ms)
    Ô£ö generateBrandOffers filters ineligible deals (0.1894ms)
  Ô£ö Brand Deals (1.2306ms)
  ÔûÂ Cancel Culture
    Ô£ö calculateSocialGrowth applies negative growth on high controversy (0.4136ms)
  Ô£ö Cancel Culture (0.603ms)
  ÔûÂ Showman Trait
    Ô£ö Showman trait boosts virality score (0.3409ms)
  Ô£ö Showman Trait (0.5538ms)
  ÔûÂ New Trait Unlocks
    Ô£ö Unlocks Melodic Genius for Lars on slow song combo (1.583ms)
    Ô£ö Unlocks Tech Wizard for Matze on technical song accuracy (0.2446ms)
    Ô£ö Unlocks Showman for Marius on stage dives (0.2735ms)
  Ô£ö New Trait Unlocks (2.4088ms)
Ô£ö Extended Social & Trait Systems (13.423ms)
Ô£ö resolveSongPlaybackWindow prefers excerpt end-start duration when available (2.1565ms)
Ô£ö resolveSongPlaybackWindow falls back to explicit duration when excerpt end is missing (0.3442ms)
Ô£ö resolveSongPlaybackWindow falls back to durationMs then default (0.2553ms)
Ô£ö resolveSongPlaybackWindow defaults to an unbounded duration when no metadata is provided (0.2048ms)
ÔûÂ Trait Logic
  ÔûÂ hasTrait
    Ô£ö returns true if member has the trait (1.016ms)
    Ô£ö returns false if member does not have the trait (0.2344ms)
    Ô£ö returns false if member has no traits (0.1782ms)
    Ô£ö returns false if member is undefined (0.1946ms)
  Ô£ö hasTrait (2.7634ms)
  ÔûÂ bandHasTrait
    Ô£ö returns true if any member has the trait (0.3794ms)
    Ô£ö returns false if no member has the trait (0.1846ms)
    Ô£ö returns false if band has no members (0.1858ms)
    Ô£ö returns false if band is undefined (0.1686ms)
  Ô£ö bandHasTrait (1.3101ms)
Ô£ö Trait Logic (4.8987ms)
ÔûÂ Trait Utils
  Ô£ö applyTraitUnlocks finds member by ID (1.5147ms)
  Ô£ö applyTraitUnlocks finds member by Name (case-insensitive) (0.333ms)
  Ô£ö applyTraitUnlocks ignores if already unlocked (0.2756ms)
Ô£ö Trait Utils (3.6199ms)
ÔûÂ checkTraitUnlocks
  ÔûÂ GIG_COMPLETE
    Ô£ö unlocks Virtuoso for Matze with 0 misses (2.9011ms)
    Ô£ö unlocks Perfektionist for Matze with 100% accuracy (0.4151ms)
    Ô£ö unlocks Blast Machine for Marius with fast song (>160 BPM) and maxCombo > 50 (0.3902ms)
    Ô£ö does not unlock Blast Machine for Marius if combo is too low (0.5563ms)
    Ô£ö unlocks Melodic Genius for Lars with slow song (<120 BPM) and maxCombo > 30 (0.6438ms)
    Ô£ö unlocks Tech Wizard for Matze with technical song (>3 difficulty) and 100% accuracy (0.3499ms)
  Ô£ö GIG_COMPLETE (6.9333ms)
  ÔûÂ TRAVEL_COMPLETE
    Ô£ö unlocks Road Warrior for Lars with >= 5000 total distance (0.418ms)
    Ô£ö does not unlock Road Warrior for Lars with < 5000 total distance (0.8378ms)
  Ô£ö TRAVEL_COMPLETE (1.6783ms)
  ÔûÂ PURCHASE
    Ô£ö unlocks Party Animal for Marius when buying cheap beer fridge (0.6417ms)
    Ô£ö unlocks Party Animal for Marius when owning cheap beer fridge (via upgrades) (0.4842ms)
    Ô£ö unlocks Gear Nerd for Matze when gear count >= 5 (0.3038ms)
  Ô£ö PURCHASE (3.1116ms)
  ÔûÂ SOCIAL_UPDATE
    Ô£ö unlocks Social Manager for Lars when max followers >= 1000 (0.343ms)
  Ô£ö SOCIAL_UPDATE (0.4794ms)
  ÔûÂ EVENT_RESOLVED
    Ô£ö unlocks Bandleader for Lars when conflicts resolved >= 3 (0.2245ms)
    Ô£ö unlocks Showman for Marius when stage dives >= 3 (0.2ms)
    Ô£ö unlocks Grudge Holder for Matze when any relationship < 30 (0.1672ms)
    Ô£ö unlocks Peacemaker for Lars when band harmony >= 90 (0.1373ms)
  Ô£ö EVENT_RESOLVED (0.9232ms)
  ÔûÂ Edge Cases
    Ô£ö does not unlock trait if already owned (0.1922ms)
    Ô£ö returns empty array if member not found (0.1255ms)
    Ô£ö returns empty array for unknown context type (0.1087ms)
  Ô£ö Edge Cases (0.5723ms)
Ô£ö checkTraitUnlocks (16.6406ms)
[ErrorHandler] Storage operation failed: saveUnlocks {
  name: 'StorageError',
  message: 'Storage operation failed: saveUnlocks',
  category: 'storage',
  severity: 'medium',
  context: { originalError: 'Storage Full' },
  recoverable: true,
  timestamp: 1772193924736,
  stack: 'StorageError: Storage operation failed: saveUnlocks\n' +
    '    at safeStorageOperation (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/errorHandler.js:197:7)\n' +
    '    at addUnlock (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/src/utils/unlockManager.js:48:10)\n' +
    '    at TestContext.<anonymous> (C:\\Users\\andre.oswald\\Code\\Neuro\\neurotoxic-game\\tests\\unlockManager.test.js:85:22)\n' +
    '    at Test.runInAsyncScope (node:async_hooks:214:14)\n' +
    '    at Test.run (node:internal/test_runner/test:1106:25)\n' +
    '    at async TestContext.<anonymous> (C:\\Users\\andre.oswald\\Code\\Neuro\\neurotoxic-game\\tests\\unlockManager.test.js:78:3)\n' +
    '    at async Test.run (node:internal/test_runner/test:1113:7)\n' +
    '    at async startSubtestAfterBootstrap (node:internal/test_runner/harness:358:3)'
}
ÔûÂ UnlockManager Unit Tests
  Ô£ö getUnlocks returns empty array when storage is empty (2.3207ms)
  Ô£ö getUnlocks returns empty array on invalid JSON (0.8364ms)
  Ô£ö getUnlocks returns empty array if data is not an array (0.4565ms)
  Ô£ö getUnlocks sanitizes mixed-type arrays (0.5904ms)
  Ô£ö addUnlock successfully adds unique string unlock (0.5846ms)
  Ô£ö addUnlock rejects non-string input (0.4067ms)
  Ô£ö addUnlock prevents duplicates (0.3438ms)
  Ô£ö addUnlock returns false if storage fails (10.362ms)
Ô£ö UnlockManager Unit Tests (31.63ms)
Ô£ö getUnifiedUpgradeCatalog includes upgrades from all active sources (1.5868ms)
Ô£ö getUnifiedUpgradeCatalog entries contain required purchase fields (0.6997ms)
Ô£ö hasUpgrade - checks ownership correctly (4.3876ms)
Ô£ö calcBaseBreakdownChance - no upgrades (0.3879ms)
Ô£ö calcBaseBreakdownChance - undefined upgrades (1.1204ms)
Ô£ö calcBaseBreakdownChance - single upgrade (van_suspension) (0.4166ms)
Ô£ö calcBaseBreakdownChance - multiple upgrades (0.2687ms)
Ô£ö calcBaseBreakdownChance - duplicate upgrades (should not double count) (0.3753ms)
Ô£ö calcBaseBreakdownChance - large reduction (hq_van_tyre_spare) (0.2446ms)
Ô£ö calcBaseBreakdownChance - clamping to zero (0.243ms)
Ô£ö calcBaseBreakdownChance - prototype pollution attempt (0.2634ms)
Ô£ö calcBaseBreakdownChance - unknown upgrade (0.4066ms)
Ô£ö calcBaseBreakdownChance - mixed known and unknown upgrades (0.2393ms)
[ArrivalLogic] Starting Gig at destination { venue: 'Club' }
(node:19476) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ useArrivalLogic
  Ô£ö executes standard arrival sequence (124.9367ms)
  Ô£ö applies harmony regen if upgrade active (19.8189ms)
  Ô£ö handles REST_STOP node (17.5511ms)
  Ô£ö handles GIG node with sufficient harmony (16.2587ms)
  Ô£ö prevents GIG if harmony too low (15.4841ms)
  Ô£ö idempotency guard prevents double execution (14.8393ms)
Ô£ö useArrivalLogic (210.9031ms)
(node:22780) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ useAudioControl
  Ô£ö initializes with values from audioManager (131.6094ms)
  Ô£ö setMusic updates music volume and state (23.0203ms)
  Ô£ö setMusic does not update state if manager returns false (17.6058ms)
  Ô£ö setMusic handles exceptions (17.7279ms)
  Ô£ö setSfx updates sfx volume and state (13.7364ms)
  Ô£ö setSfx handles exceptions (14.6261ms)
  Ô£ö toggleMute toggles mute state (21.7369ms)
  Ô£ö resumeMusic delegates through hook action (30.4805ms)
  Ô£ö stopMusic delegates through hook action (12.9779ms)
  Ô£ö inline selector remains stable across rerenders (12.0575ms)
  Ô£ö selector receives focused state updates (11.5092ms)
  Ô£ö syncs external mute updates across multiple hook instances (13.6113ms)
  Ô£ö polling fallback updates state when subscribe is unavailable (15.9363ms)
  Ô£ö toggleMute handles exceptions (12.0919ms)
Ô£ö useAudioControl (351.5705ms)
(node:14796) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ useBandHQModal
  Ô£ö toggles modal state correctly (109.1948ms)
Ô£ö useBandHQModal (110.5769ms)
ÔûÂ useGigEffects
  Ô£ö triggerBandAnimation uses refs instead of DOM query (148.8558ms)
  Ô£ö chaosStyle memoization check (33.5027ms)
Ô£ö useGigEffects (183.8781ms)
(node:10532) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ useGigInput
  Ô£ö handleLaneInput calls registerInput and triggerBandAnimation (108.1254ms)
  Ô£ö Escape key toggles pause menu (17.0415ms)
  Ô£ö Lane key triggers input (12.8317ms)
Ô£ö useGigInput (139.1742ms)
ÔûÂ usePurchaseLogic
  Ô£ö handleBuy marks one-time stat_modifier upgrades as owned in van.upgrades (153.8608ms)
  Ô£ö handleBuy prevents duplicate purchase of one-time passive upgrades (19.8838ms)
  Ô£ö handleBuy allows negative values for performance stats (20.0327ms)
  Ô£ö handleBuy applies harmony_regen_travel passive effect using key (18.309ms)
  Ô£ö handleBuy applies passive_followers passive effect using key (18.4424ms)
Ô£ö usePurchaseLogic (232.6903ms)
(node:11396) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ useRhythmGameLogic
  Ô£ö initial state (102.1278ms)
  Ô£ö initialization runs on mount (231.2831ms)
  Ô£ö handleHit updates score (213.2787ms)
  Ô£ö calls endGig when all notes are processed near song end (214.0162ms)
  Ô£ö calls endGig when audio playback reports ended (230.4708ms)
Ô£ö useRhythmGameLogic (992.874ms)
(node:27564) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ useRhythmGameScoring
  Ô£ö initialization returns handlers (130.484ms)
  Ô£ö handleHit updates score and combo on valid hit (19.9926ms)
  Ô£ö handleHit triggers miss on invalid hit (16.9124ms)
  Ô£ö handleHit applies lane multipliers (17.0254ms)
  Ô£ö handleMiss resets combo and applies penalties (16.8837ms)
  Ô£ö handleMiss triggers game over when health depleted (19.0354ms)
  Ô£ö activateToxicMode sets flag and toast (14.9779ms)
  Ô£ö Toxic Mode applies 4x score multiplier (23.7682ms)
  Ô£ö Real miss deactivates Toxic Mode (12.7834ms)
  Ô£ö Empty hit does not deactivate Toxic Mode (11.6917ms)
  Ô£ö Guestlist modifier increases score (9.6142ms)
  Ô£ö Perfektionist trait applies bonus score at high accuracy (14.0885ms)
  Ô£ö Perfektionist trait does not apply bonus score at low accuracy (9.6021ms)
  Ô£ö Overload increases on hit and triggers Toxic Mode when full (6.14ms)
Ô£ö useRhythmGameScoring (325.5278ms)
(node:25856) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ useRoadieLogic
  Ô£ö initializes with correct default state (124.215ms)
  Ô£ö moves player within bounds (15.7383ms)
  Ô£ö delivers item at venue (16.1111ms)
  Ô£ö picks up item at start (10.3539ms)
  Ô£ö spawns traffic over time (10.9409ms)
  Ô£ö handles collision and damage (11.2377ms)
  Ô£ö triggers game over on completion (8.9951ms)
Ô£ö useRoadieLogic (199.509ms)
(node:28248) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ useTourbusLogic
  ÔûÂ Spawn Rate
    Ô£ö spawn rate maintains constant density (spawns faster at higher speeds) (129.7876ms)
  Ô£ö Spawn Rate (130.7392ms)
  ÔûÂ Movement
    Ô£ö moveLeft decreases lane but clamps at 0 (16.6307ms)
    Ô£ö moveRight increases lane but clamps at LANE_COUNT - 1 (16.6628ms)
  Ô£ö Movement (33.696ms)
  ÔûÂ Collision & Damage
    Ô£ö collision with OBSTACLE increases damage and plays SFX (18.1241ms)
    Ô£ö collision with FUEL collects item and plays SFX (17.071ms)
    Ô£ö obstacles are removed when off-screen (15.3455ms)
  Ô£ö Collision & Damage (51.0779ms)
  ÔûÂ Upgrades
    Ô£ö van_armor reduces damage to 2 (14.8296ms)
    Ô£ö van_bullbar reduces damage to 5 (17.338ms)
    Ô£ö van_armor takes precedence over van_bullbar (22.3654ms)
  Ô£ö Upgrades (55.0355ms)
  ÔûÂ Game Completion
    Ô£ö completes game when target distance reached (15.5367ms)
  Ô£ö Game Completion (15.6651ms)
Ô£ö useTourbusLogic (287.1654ms)
(node:15880) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ useTravelLogic Optimization
  Ô£ö handleTravel remains referentially stable when pendingTravelNode changes (92.582ms)
Ô£ö useTravelLogic Optimization (93.6488ms)
(node:20112) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ useTravelLogic Performance
  Ô£ö handleTravel remains referentially stable when player money changes (60.5476ms)
Ô£ö useTravelLogic Performance (61.5998ms)
(node:33580) ExperimentalWarning: Module mocking is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
ÔûÂ useTravelLogic
  Ô£ö initial state (60.2822ms)
  Ô£ö handleTravel initiates travel when valid (10.241ms)
  Ô£ö handleTravel prevents travel if insufficient funds (7.2158ms)
  Ô£ö handleTravel prevents travel if insufficient fuel (6.7476ms)
  Ô£ö handleTravel to current node triggers interaction (8.1393ms)
  Ô£ö onTravelComplete updates state and finalizes travel (8.0915ms)
  Ô£ö handleRefuel fills tank and deducts money (5.6678ms)
  Ô£ö handleRepair fixes van and deducts money (6.4999ms)
  Ô£ö handleRefuel does nothing when traveling (7.3071ms)
  Ô£ö handleRepair does nothing when traveling (12.1914ms)
Ô£ö useTravelLogic (133.5223ms)
Ô£ö Van Breakdown: Base breakdown chance with no upgrades and perfect condition (1.9506ms)
Ô£ö Van Breakdown: Condition below 60 increases breakdown chance (0.4141ms)
Ô£ö Van Breakdown: Condition below 30 significantly increases breakdown chance (0.2831ms)
Ô£ö Van Breakdown: Upgrades reduce base breakdown chance (0.2375ms)
Ô£ö Van Breakdown: NO COMPOUNDING - Breakdown chance is stable over multiple days with similar condition (0.4665ms)
Ôä╣ tests 932
Ôä╣ suites 127
Ôä╣ pass 926
Ôä╣ fail 6
Ôä╣ cancelled 0
Ôä╣ skipped 0
Ôä╣ todo 0
Ôä╣ duration_ms 34709.8335

Ô£û failing tests:

test at tests\audioProcedural.test.js:1:1
Ô£û tests\audioProcedural.test.js (912.4394ms)
  'test failed'

test at tests\audioProceduralMetal.test.js:1:1
Ô£û tests\audioProceduralMetal.test.js (760.4723ms)
  'test failed'

test at tests\audioProceduralPlayNote.test.js:1:1
Ô£û tests\audioProceduralPlayNote.test.js (865.7783ms)
  'test failed'

test at tests\audioProceduralPlaySong.test.js:1:1
Ô£û tests\audioProceduralPlaySong.test.js (866.9677ms)
  'test failed'

test at tests\mainMenuAudio.test.js:30:1
Ô£û MainMenu starts ambient audio when starting a tour (264.0473ms)
  Error [TestingLibraryElementError]: Unable to find an accessible element with the role "button" and name `/start tour/i`
  
  Here are the accessible roles:
  
    heading:
  
    Name "NEUROTOXIC":
    [36m<h1[39m
      [33mclass[39m=[32m"text-6xl md:text-9xl text-center text-transparent bg-clip-text bg-gradient-to-b from-(--toxic-green) to-(--toxic-green-dark) font-['Metal_Mania'] animate-neon-flicker mb-2"[39m
      [33mstyle[39m=[32m"-webkit-text-stroke: 2px var(--toxic-green); opacity: 0; transform: translateY(-20px) scale(0.8);"[39m
    [36m/>[39m
  
    Name "Grind The Void":
    [36m<h2[39m
      [33mclass[39m=[32m"uppercase text-lg md:text-2xl text-(--toxic-green)/80 mb-2 font-[Courier_New] text-center"[39m
      [33mstyle[39m=[32m"opacity: 0; letter-spacing: 0.5em;"[39m
    [36m/>[39m
  
    --------------------------------------------------
    button:
  
    Name "ui:start_game":
    [36m<button[39m
      [33maria-busy[39m=[32m"false"[39m
      [33maria-disabled[39m=[32m"false"[39m
      [33mclass[39m=[32m"
            relative px-8 py-4 text-xl bg-(--void-black)
            font-[Metal_Mania] font-bold uppercase tracking-widest
            transition-all duration-100
            group
            border-2 border-(--toxic-green) text-(--toxic-green)
                    hover:bg-(--toxic-green) hover:text-(--void-black)
                    hover:translate-x-1 hover:-translate-y-1
                    hover:shadow-[4px_4px_0px_var(--blood-red)]
                    active:translate-x-0 active:translate-y-0 active:shadow-none
            relative z-20
          "[39m
    [36m/>[39m
  
    Name "ui:load_game":
    [36m<button[39m
      [33maria-busy[39m=[32m"false"[39m
      [33maria-disabled[39m=[32m"false"[39m
      [33mclass[39m=[32m"
            relative px-8 py-4 text-xl bg-(--void-black)
            font-[Metal_Mania] font-bold uppercase tracking-widest
            transition-all duration-100
            group
            border-2 border-(--toxic-green) text-(--toxic-green)
                    hover:bg-(--toxic-green) hover:text-(--void-black)
                    hover:translate-x-1 hover:-translate-y-1
                    hover:shadow-[4px_4px_0px_var(--blood-red)]
                    active:translate-x-0 active:translate-y-0 active:shadow-none
            relative z-20 border-(--blood-red) text-(--blood-red) hover:bg-(--blood-red) hover:shadow-[4px_4px_0px_var(--toxic-green)]
          "[39m
    [36m/>[39m
  
    Name "ui:band_hq":
    [36m<button[39m
      [33maria-busy[39m=[32m"false"[39m
      [33maria-disabled[39m=[32m"false"[39m
      [33mclass[39m=[32m"
            relative px-8 py-4 text-xl bg-(--void-black)
            font-[Metal_Mania] font-bold uppercase tracking-widest
            transition-all duration-100
            group
            border-2 border-(--toxic-green) text-(--toxic-green)
                    hover:bg-(--toxic-green) hover:text-(--void-black)
                    hover:translate-x-1 hover:-translate-y-1
                    hover:shadow-[4px_4px_0px_var(--blood-red)]
                    active:translate-x-0 active:translate-y-0 active:shadow-none
            relative z-20 border-(--warning-yellow) text-(--warning-yellow) hover:bg-(--warning-yellow) hover:shadow-[4px_4px_0px_var(--toxic-green)]
          "[39m
    [36m/>[39m
  
    Name "ui:credits":
    [36m<button[39m
      [33maria-busy[39m=[32m"false"[39m
      [33maria-disabled[39m=[32m"false"[39m
      [33mclass[39m=[32m"
            relative px-8 py-4 text-xl bg-(--void-black)
            font-[Metal_Mania] font-bold uppercase tracking-widest
            transition-all duration-100
            group
            border-2 border-(--toxic-green) text-(--toxic-green)
                    hover:bg-(--toxic-green) hover:text-(--void-black)
                    hover:translate-x-1 hover:-translate-y-1
                    hover:shadow-[4px_4px_0px_var(--blood-red)]
                    active:translate-x-0 active:translate-y-0 active:shadow-none
            
          "[39m
    [36m/>[39m
  
    --------------------------------------------------
  
  Ignored nodes: comments, script, style
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex flex-col items-center justify-center h-full w-full bg-(--void-black) z-50 relative overflow-hidden"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"absolute inset-0 z-0 opacity-40 bg-cover bg-center pointer-events-none"[39m
          [33mstyle[39m=[32m"background-image: url(\"https://gen.pollinations.ai/image/dark%20void%20grimy%20texture%20with%20toxic%20green%20glitch%20accents%20abstract%20death%20metal%20aesthetic%20high%20contrast?model=flux&seed=666&key=pk_xDL8u2ty4Sxucaa3\");"[39m
        [36m/>[39m
        [36m<div[39m
          [33mclass[39m=[32m"absolute inset-0 z-0 bg-gradient-to-b from-black/0 to-black/90 pointer-events-none"[39m
        [36m/>[39m
        [36m<div[39m
          [33mclass[39m=[32m"relative z-10 flex flex-col items-center"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-6xl md:text-9xl text-center text-transparent bg-clip-text bg-gradient-to-b from-(--toxic-green) to-(--toxic-green-dark) font-['Metal_Mania'] animate-neon-flicker mb-2"[39m
            [33mstyle[39m=[32m"-webkit-text-stroke: 2px var(--toxic-green); opacity: 0; transform: translateY(-20px) scale(0.8);"[39m
          [36m>[39m
            [0mNEUROTOXIC[0m
          [36m</h1>[39m
          [36m<div[39m
            [33mclass[39m=[32m"h-[2px] bg-gradient-to-r from-transparent via-(--toxic-green) to-transparent mb-4 max-w-md"[39m
            [33mstyle[39m=[32m"width: 0px;"[39m
          [36m/>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"uppercase text-lg md:text-2xl text-(--toxic-green)/80 mb-2 font-[Courier_New] text-center"[39m
            [33mstyle[39m=[32m"opacity: 0; letter-spacing: 0.5em;"[39m
          [36m>[39m
            [0mGrind The Void[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-10 px-3 py-1 border border-(--toxic-green)/30 text-[10px] font-mono text-(--toxic-green)/60 tracking-widest"[39m
            [33mstyle[39m=[32m"opacity: 0;"[39m
          [36m>[39m
            [0mv3.0 // EARLY ACCESS[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col gap-3"[39m
            [33mstyle[39m=[32m"opacity: 0; transform: translateY(20px);"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-busy[39m=[32m"false"[39m
              [33maria-disabled[39m=[32m"false"[39m
              [33mclass[39m=[32m"
          relative px-8 py-4 text-xl bg-(--void-black)
          font-[Metal_Mania] font-bold uppercase tracking-widest
          transition-all duration-100
          group
          border-2 border-(--toxic-green) text-(--toxic-green)
                  hover:bg-(--toxic-green) hover:text-(--void-black)
                  hover:translate-x-1 hover:-translate-y-1
                  hover:shadow-[4px_4px_0px_var(--blood-red)]
                  active:translate-x-0 active:translate-y-0 active:shadow-none
          relative z-20
        "[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"relative z-10 flex items-center justify-center gap-2 group-hover:animate-pulse opacity-100"[39m
              [36m>[39m
                [0mui:start_game[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute inset-0 bg-(--star-white) opacity-0 group-hover:opacity-10 mix-blend-difference pointer-events-none"[39m
              [36m/>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-busy[39m=[32m"false"[39m
              [33maria-disabled[39m=[32m"false"[39m
              [33mclass[39m=[32m"
          relative px-8 py-4 text-xl bg-(--void-black)
          font-[Metal_Mania] font-bold uppercase tracking-widest
          transition-all duration-100
          group
          border-2 border-(--toxic-green) text-(--toxic-green)
                  hover:bg-(--toxic-green) hover:text-(--void-black)
                  hover:translate-x-1 hover:-translate-y-1
                  hover:shadow-[4px_4px_0px_var(--blood-red)]
                  active:translate-x-0 active:translate-y-0 active:shadow-none
          relative z-20 border-(--blood-red) text-(--blood-red) hover:bg-(--blood-red) hover:shadow-[4px_4px_0px_var(--toxic-green)]
        "[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"relative z-10 flex items-center justify-center gap-2 group-hover:animate-pulse opacity-100"[39m
              [36m>[39m
                [0mui:load_game[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute inset-0 bg-(--star-white) opacity-0 group-hover:opacity-10 mix-blend-difference pointer-events-none"[39m
              [36m/>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-busy[39m=[32m"false"[39m
              [33maria-disabled[39m=[32m"false"[39m
              [33mclass[39m=[32m"
          relative px-8 py-4 text-xl bg-(--void-black)
          font-[Metal_Mania] font-bold uppercase tracking-widest
          transition-all duration-100
          group
          border-2 border-(--toxic-green) text-(--toxic-green)
                  hover:bg-(--toxic-green) hover:text-(--void-black)
                  hover:translate-x-1 hover:-translate-y-1
                  hover:shadow-[4px_4px_0px_var(--blood-red)]
                  active:translate-x-0 active:translate-y-0 active:shadow-none
          relative z-20 border-(--warning-yellow) text-(--warning-yellow) hover:bg-(--warning-yellow) hover:shadow-[4px_4px_0px_var(--toxic-green)]
        "[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"relative z-10 flex items-center justify-center gap-2 group-hover:animate-pulse opacity-100"[39m
              [36m>[39m
                [0mui:band_hq[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute inset-0 bg-(--star-white) opacity-0 group-hover:opacity-10 mix-blend-difference pointer-events-none"[39m
              [36m/>[39m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex gap-4 mt-6"[39m
            [33mstyle[39m=[32m"opacity: 0;"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-busy[39m=[32m"false"[39m
              [33maria-disabled[39m=[32m"false"[39m
              [33mclass[39m=[32m"
          relative px-8 py-4 text-xl bg-(--void-black)
          font-[Metal_Mania] font-bold uppercase tracking-widest
          transition-all duration-100
          group
          border-2 border-(--toxic-green) text-(--toxic-green)
                  hover:bg-(--toxic-green) hover:text-(--void-black)
                  hover:translate-x-1 hover:-translate-y-1
                  hover:shadow-[4px_4px_0px_var(--blood-red)]
                  active:translate-x-0 active:translate-y-0 active:shadow-none
          
        "[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"relative z-10 flex items-center justify-center gap-2 group-hover:animate-pulse opacity-100"[39m
              [36m>[39m
                [0mui:credits[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute inset-0 bg-(--star-white) opacity-0 group-hover:opacity-10 mix-blend-difference pointer-events-none"[39m
              [36m/>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"absolute bottom-6 flex flex-col items-center gap-1 z-10"[39m
          [33mstyle[39m=[32m"opacity: 0;"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-32 h-[1px] bg-gradient-to-r from-transparent via-(--ash-gray)/50 to-transparent"[39m
          [36m/>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-(--ash-gray)/60 text-[10px] font-mono tracking-widest"[39m
          [36m>[39m
            [0m┬® 2026 NEUROTOXIC // DEATH GRINDCORE FROM STENDAL[0m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
      at Object.getElementError (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\node_modules\@testing-library\dom\dist\config.js:37:19)
      at C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\node_modules\@testing-library\dom\dist\query-helpers.js:76:38
      at C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\node_modules\@testing-library\dom\dist\query-helpers.js:52:17
      at C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\node_modules\@testing-library\dom\dist\query-helpers.js:95:19
      at TestContext.<anonymous> (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/tests/mainMenuAudio.test.js:34:20)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1106:25)
      at async startSubtestAfterBootstrap (node:internal/test_runner/harness:358:3)

test at tests\mainMenuAudio.test.js:42:1
Ô£û MainMenu starts ambient audio when loading a save (104.718ms)
  Error [TestingLibraryElementError]: Unable to find an accessible element with the role "button" and name `/load game/i`
  
  Here are the accessible roles:
  
    heading:
  
    Name "NEUROTOXIC":
    [36m<h1[39m
      [33mclass[39m=[32m"text-6xl md:text-9xl text-center text-transparent bg-clip-text bg-gradient-to-b from-(--toxic-green) to-(--toxic-green-dark) font-['Metal_Mania'] animate-neon-flicker mb-2"[39m
      [33mstyle[39m=[32m"-webkit-text-stroke: 2px var(--toxic-green); opacity: 0; transform: translateY(-20px) scale(0.8);"[39m
    [36m/>[39m
  
    Name "Grind The Void":
    [36m<h2[39m
      [33mclass[39m=[32m"uppercase text-lg md:text-2xl text-(--toxic-green)/80 mb-2 font-[Courier_New] text-center"[39m
      [33mstyle[39m=[32m"opacity: 0; letter-spacing: 0.5em;"[39m
    [36m/>[39m
  
    --------------------------------------------------
    button:
  
    Name "ui:start_game":
    [36m<button[39m
      [33maria-busy[39m=[32m"false"[39m
      [33maria-disabled[39m=[32m"false"[39m
      [33mclass[39m=[32m"
            relative px-8 py-4 text-xl bg-(--void-black)
            font-[Metal_Mania] font-bold uppercase tracking-widest
            transition-all duration-100
            group
            border-2 border-(--toxic-green) text-(--toxic-green)
                    hover:bg-(--toxic-green) hover:text-(--void-black)
                    hover:translate-x-1 hover:-translate-y-1
                    hover:shadow-[4px_4px_0px_var(--blood-red)]
                    active:translate-x-0 active:translate-y-0 active:shadow-none
            relative z-20
          "[39m
    [36m/>[39m
  
    Name "ui:load_game":
    [36m<button[39m
      [33maria-busy[39m=[32m"false"[39m
      [33maria-disabled[39m=[32m"false"[39m
      [33mclass[39m=[32m"
            relative px-8 py-4 text-xl bg-(--void-black)
            font-[Metal_Mania] font-bold uppercase tracking-widest
            transition-all duration-100
            group
            border-2 border-(--toxic-green) text-(--toxic-green)
                    hover:bg-(--toxic-green) hover:text-(--void-black)
                    hover:translate-x-1 hover:-translate-y-1
                    hover:shadow-[4px_4px_0px_var(--blood-red)]
                    active:translate-x-0 active:translate-y-0 active:shadow-none
            relative z-20 border-(--blood-red) text-(--blood-red) hover:bg-(--blood-red) hover:shadow-[4px_4px_0px_var(--toxic-green)]
          "[39m
    [36m/>[39m
  
    Name "ui:band_hq":
    [36m<button[39m
      [33maria-busy[39m=[32m"false"[39m
      [33maria-disabled[39m=[32m"false"[39m
      [33mclass[39m=[32m"
            relative px-8 py-4 text-xl bg-(--void-black)
            font-[Metal_Mania] font-bold uppercase tracking-widest
            transition-all duration-100
            group
            border-2 border-(--toxic-green) text-(--toxic-green)
                    hover:bg-(--toxic-green) hover:text-(--void-black)
                    hover:translate-x-1 hover:-translate-y-1
                    hover:shadow-[4px_4px_0px_var(--blood-red)]
                    active:translate-x-0 active:translate-y-0 active:shadow-none
            relative z-20 border-(--warning-yellow) text-(--warning-yellow) hover:bg-(--warning-yellow) hover:shadow-[4px_4px_0px_var(--toxic-green)]
          "[39m
    [36m/>[39m
  
    Name "ui:credits":
    [36m<button[39m
      [33maria-busy[39m=[32m"false"[39m
      [33maria-disabled[39m=[32m"false"[39m
      [33mclass[39m=[32m"
            relative px-8 py-4 text-xl bg-(--void-black)
            font-[Metal_Mania] font-bold uppercase tracking-widest
            transition-all duration-100
            group
            border-2 border-(--toxic-green) text-(--toxic-green)
                    hover:bg-(--toxic-green) hover:text-(--void-black)
                    hover:translate-x-1 hover:-translate-y-1
                    hover:shadow-[4px_4px_0px_var(--blood-red)]
                    active:translate-x-0 active:translate-y-0 active:shadow-none
            
          "[39m
    [36m/>[39m
  
    --------------------------------------------------
  
  Ignored nodes: comments, script, style
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"flex flex-col items-center justify-center h-full w-full bg-(--void-black) z-50 relative overflow-hidden"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"absolute inset-0 z-0 opacity-40 bg-cover bg-center pointer-events-none"[39m
          [33mstyle[39m=[32m"background-image: url(\"https://gen.pollinations.ai/image/dark%20void%20grimy%20texture%20with%20toxic%20green%20glitch%20accents%20abstract%20death%20metal%20aesthetic%20high%20contrast?model=flux&seed=666&key=pk_xDL8u2ty4Sxucaa3\");"[39m
        [36m/>[39m
        [36m<div[39m
          [33mclass[39m=[32m"absolute inset-0 z-0 bg-gradient-to-b from-black/0 to-black/90 pointer-events-none"[39m
        [36m/>[39m
        [36m<div[39m
          [33mclass[39m=[32m"relative z-10 flex flex-col items-center"[39m
        [36m>[39m
          [36m<h1[39m
            [33mclass[39m=[32m"text-6xl md:text-9xl text-center text-transparent bg-clip-text bg-gradient-to-b from-(--toxic-green) to-(--toxic-green-dark) font-['Metal_Mania'] animate-neon-flicker mb-2"[39m
            [33mstyle[39m=[32m"-webkit-text-stroke: 2px var(--toxic-green); opacity: 0; transform: translateY(-20px) scale(0.8);"[39m
          [36m>[39m
            [0mNEUROTOXIC[0m
          [36m</h1>[39m
          [36m<div[39m
            [33mclass[39m=[32m"h-[2px] bg-gradient-to-r from-transparent via-(--toxic-green) to-transparent mb-4 max-w-md"[39m
            [33mstyle[39m=[32m"width: 0px;"[39m
          [36m/>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"uppercase text-lg md:text-2xl text-(--toxic-green)/80 mb-2 font-[Courier_New] text-center"[39m
            [33mstyle[39m=[32m"opacity: 0; letter-spacing: 0.5em;"[39m
          [36m>[39m
            [0mGrind The Void[0m
          [36m</h2>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-10 px-3 py-1 border border-(--toxic-green)/30 text-[10px] font-mono text-(--toxic-green)/60 tracking-widest"[39m
            [33mstyle[39m=[32m"opacity: 0;"[39m
          [36m>[39m
            [0mv3.0 // EARLY ACCESS[0m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col gap-3"[39m
            [33mstyle[39m=[32m"opacity: 0; transform: translateY(20px);"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-busy[39m=[32m"false"[39m
              [33maria-disabled[39m=[32m"false"[39m
              [33mclass[39m=[32m"
          relative px-8 py-4 text-xl bg-(--void-black)
          font-[Metal_Mania] font-bold uppercase tracking-widest
          transition-all duration-100
          group
          border-2 border-(--toxic-green) text-(--toxic-green)
                  hover:bg-(--toxic-green) hover:text-(--void-black)
                  hover:translate-x-1 hover:-translate-y-1
                  hover:shadow-[4px_4px_0px_var(--blood-red)]
                  active:translate-x-0 active:translate-y-0 active:shadow-none
          relative z-20
        "[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"relative z-10 flex items-center justify-center gap-2 group-hover:animate-pulse opacity-100"[39m
              [36m>[39m
                [0mui:start_game[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute inset-0 bg-(--star-white) opacity-0 group-hover:opacity-10 mix-blend-difference pointer-events-none"[39m
              [36m/>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-busy[39m=[32m"false"[39m
              [33maria-disabled[39m=[32m"false"[39m
              [33mclass[39m=[32m"
          relative px-8 py-4 text-xl bg-(--void-black)
          font-[Metal_Mania] font-bold uppercase tracking-widest
          transition-all duration-100
          group
          border-2 border-(--toxic-green) text-(--toxic-green)
                  hover:bg-(--toxic-green) hover:text-(--void-black)
                  hover:translate-x-1 hover:-translate-y-1
                  hover:shadow-[4px_4px_0px_var(--blood-red)]
                  active:translate-x-0 active:translate-y-0 active:shadow-none
          relative z-20 border-(--blood-red) text-(--blood-red) hover:bg-(--blood-red) hover:shadow-[4px_4px_0px_var(--toxic-green)]
        "[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"relative z-10 flex items-center justify-center gap-2 group-hover:animate-pulse opacity-100"[39m
              [36m>[39m
                [0mui:load_game[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute inset-0 bg-(--star-white) opacity-0 group-hover:opacity-10 mix-blend-difference pointer-events-none"[39m
              [36m/>[39m
            [36m</button>[39m
            [36m<button[39m
              [33maria-busy[39m=[32m"false"[39m
              [33maria-disabled[39m=[32m"false"[39m
              [33mclass[39m=[32m"
          relative px-8 py-4 text-xl bg-(--void-black)
          font-[Metal_Mania] font-bold uppercase tracking-widest
          transition-all duration-100
          group
          border-2 border-(--toxic-green) text-(--toxic-green)
                  hover:bg-(--toxic-green) hover:text-(--void-black)
                  hover:translate-x-1 hover:-translate-y-1
                  hover:shadow-[4px_4px_0px_var(--blood-red)]
                  active:translate-x-0 active:translate-y-0 active:shadow-none
          relative z-20 border-(--warning-yellow) text-(--warning-yellow) hover:bg-(--warning-yellow) hover:shadow-[4px_4px_0px_var(--toxic-green)]
        "[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"relative z-10 flex items-center justify-center gap-2 group-hover:animate-pulse opacity-100"[39m
              [36m>[39m
                [0mui:band_hq[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute inset-0 bg-(--star-white) opacity-0 group-hover:opacity-10 mix-blend-difference pointer-events-none"[39m
              [36m/>[39m
            [36m</button>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex gap-4 mt-6"[39m
            [33mstyle[39m=[32m"opacity: 0;"[39m
          [36m>[39m
            [36m<button[39m
              [33maria-busy[39m=[32m"false"[39m
              [33maria-disabled[39m=[32m"false"[39m
              [33mclass[39m=[32m"
          relative px-8 py-4 text-xl bg-(--void-black)
          font-[Metal_Mania] font-bold uppercase tracking-widest
          transition-all duration-100
          group
          border-2 border-(--toxic-green) text-(--toxic-green)
                  hover:bg-(--toxic-green) hover:text-(--void-black)
                  hover:translate-x-1 hover:-translate-y-1
                  hover:shadow-[4px_4px_0px_var(--blood-red)]
                  active:translate-x-0 active:translate-y-0 active:shadow-none
          
        "[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"relative z-10 flex items-center justify-center gap-2 group-hover:animate-pulse opacity-100"[39m
              [36m>[39m
                [0mui:credits[0m
              [36m</span>[39m
              [36m<span[39m
                [33mclass[39m=[32m"absolute inset-0 bg-(--star-white) opacity-0 group-hover:opacity-10 mix-blend-difference pointer-events-none"[39m
              [36m/>[39m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"absolute bottom-6 flex flex-col items-center gap-1 z-10"[39m
          [33mstyle[39m=[32m"opacity: 0;"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-32 h-[1px] bg-gradient-to-r from-transparent via-(--ash-gray)/50 to-transparent"[39m
          [36m/>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-(--ash-gray)/60 text-[10px] font-mono tracking-widest"[39m
          [36m>[39m
            [0m┬® 2026 NEUROTOXIC // DEATH GRINDCORE FROM STENDAL[0m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
      at Object.getElementError (C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\node_modules\@testing-library\dom\dist\config.js:37:19)
      at C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\node_modules\@testing-library\dom\dist\query-helpers.js:76:38
      at C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\node_modules\@testing-library\dom\dist\query-helpers.js:52:17
      at C:\Users\andre.oswald\Code\Neuro\neurotoxic-game\node_modules\@testing-library\dom\dist\query-helpers.js:95:19
      at TestContext.<anonymous> (file:///C:/Users/andre.oswald/Code/Neuro/neurotoxic-game/tests/mainMenuAudio.test.js:46:20)
      at Test.runInAsyncScope (node:async_hooks:214:14)
      at Test.run (node:internal/test_runner/test:1106:25)
      at async Test.processPendingSubtests (node:internal/test_runner/test:788:7)
